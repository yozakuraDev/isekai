import{a as be,r as a,j as e,u as Z,L as E,b as q,m as N,B as ye,A as ve,c as we,d as R}from"./vendor-B3hO0H_Y.js";import{U as T,G as K,V as Ne,a as ke,X as ie,M as Ce,b as oe,S as F,A as Se,c as ee,d as Pe,T as H,C as Ae,e as le,f as Ee,g as ce,h as Y,W as Le,i as Ie,j as Me,k as de,L as te,l as Te,m as me,n as Re,o as De,P as He,K as J,p as Ue}from"./ui-BHO_e5vm.js";import{u as se}from"./audio-CWFWi0oB.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))m(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const h of s.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&m(h)}).observe(document,{childList:!0,subtree:!0});function d(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function m(l){if(l.ep)return;l.ep=!0;const s=d(l);fetch(l.href,s)}})();var ue,ae=be;ue=ae.createRoot,ae.hydrateRoot;const xe=a.createContext(void 0),Oe=({children:t})=>{const[n,d]=a.useState("ja");return e.jsx(xe.Provider,{value:{language:n,setLanguage:d},children:t})},D=()=>{const t=a.useContext(xe);if(t===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return t},$e="https://api.yukkurinet.com/api";async function I(t,n="GET",d,m){const l={"Content-Type":"application/json"};m&&(l.Authorization=`Bearer ${m}`);const s={method:n,headers:l,body:d?JSON.stringify(d):void 0,credentials:"include"},h=await fetch(`${$e}${t}`,s);if(!h.ok){const b=await h.json();throw new Error(b.error||"API request failed")}return h.json()}const B={register:(t,n,d)=>I("/register","POST",{username:t,email:n,password:d}),login:(t,n)=>I("/login","POST",{email:t,password:n}),getCurrentUser:t=>I("/auth/user","GET",void 0,t)},Be={getStatus:()=>I("/server-status")},Fe={getWorldMap:()=>I("/world-map")},qe={getRankings:()=>I("/rankings")},re={createCharacter:(t,n,d,m)=>I("/characters","POST",{username:n,race:d,characterClass:m},t),getUserCharacters:t=>I("/characters","GET",void 0,t)},_={getPosts:()=>I("/posts"),createPost:(t,n)=>I("/posts","POST",{content:n},t),likePost:(t,n)=>I(`/posts/${n}/like`,"POST",{},t)},V={getProfile:t=>I("/profile","GET",void 0,t),updateProfile:(t,n)=>I("/profile","PUT",n,t)},he=a.createContext(void 0),We=({children:t})=>{const[n,d]=a.useState(null),[m,l]=a.useState(null),[s,h]=a.useState(null),[b,i]=a.useState(!1),[v,r]=a.useState(null);a.useEffect(()=>{const o=localStorage.getItem("user"),p=localStorage.getItem("token"),j=localStorage.getItem("character");o&&p&&(d(JSON.parse(o)),l(p),j&&h(JSON.parse(j)))},[]),a.useEffect(()=>{(async()=>{const p=localStorage.getItem("token");if(p&&!n)try{i(!0);const j=await B.getCurrentUser(p);d(j.user),l(p),localStorage.setItem("user",JSON.stringify(j.user))}catch(j){console.error("Error fetching user data:",j),localStorage.removeItem("token"),localStorage.removeItem("user"),l(null)}finally{i(!1)}})()},[n]);const c=async(o,p,j)=>{i(!0),r(null);try{const f=await B.register(o,p,j);d(f.user),l(f.token),localStorage.setItem("user",JSON.stringify(f.user)),localStorage.setItem("token",f.token)}catch(f){throw r(f.message),f}finally{i(!1)}},w=async(o,p)=>{i(!0),r(null);try{const j=await B.login(o,p);d(j.user),l(j.token),localStorage.setItem("user",JSON.stringify(j.user)),localStorage.setItem("token",j.token),await y()}catch(j){throw r(j.message),j}finally{i(!1)}},S=()=>{const o="https://api.yukkurinet.com/api/auth/discord";window.location.href=o},u=()=>{fetch(`${"https://api.yukkurinet.com/api".replace("/api","")}/api/auth/logout`,{credentials:"include"}).catch(p=>console.error("Logout error:",p)),d(null),l(null),h(null),localStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("character")},g=async(o,p,j)=>{if(!m)throw r("Authentication required"),new Error("Authentication required");i(!0),r(null);try{const f=await re.createCharacter(m,o,p,j);h(f.character),localStorage.setItem("character",JSON.stringify(f.character))}catch(f){throw r(f.message),f}finally{i(!1)}},y=async()=>{if(m){i(!0);try{const o=await re.getUserCharacters(m);o.length>0&&(h(o[0]),localStorage.setItem("character",JSON.stringify(o[0])))}catch(o){console.error("Error fetching character:",o)}finally{i(!1)}}};return e.jsx(he.Provider,{value:{user:n,token:m,character:s,isLoggedIn:!!n&&!!m,loading:b,error:v,register:c,login:w,logout:u,createCharacter:g,fetchUserCharacter:y,loginWithDiscord:S},children:t})},$=()=>{const t=a.useContext(he);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},ze=({isMuted:t,setIsMuted:n,volume:d,setVolume:m})=>{const[l,s]=a.useState(!1),[h,b]=a.useState(!1),[i,v]=a.useState({x:0,y:0}),{language:r,setLanguage:c}=D(),{isLoggedIn:w,user:S,logout:u}=$(),g=Z(),y=()=>{s(!l)},o=()=>{n(!t)},p=A=>{m(parseFloat(A.target.value))},j=A=>{v({x:A.clientX,y:A.clientY})},f=()=>{b(!0)},x=()=>{b(!1)},M=()=>{u(),s(!1)};a.useEffect(()=>{const A=W=>{const U=W.target;l&&!U.closest(".navbar")&&!U.closest(".mobile-menu-button")&&s(!1)};return document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[l]),a.useEffect(()=>{s(!1)},[g]);const P={home:{ja:"ホーム",en:"Home",ko:"홈",ar:"الرئيسية"},serverInfo:{ja:"サーバー情報",en:"Server Info",ko:"서버 정보",ar:"معلومات الخادم"},rules:{ja:"ルール",en:"Rules",ko:"규칙",ar:"القواعد"},character:{ja:"キャラクター登録",en:"Character",ko:"캐릭터 등록",ar:"تسجيل الشخصية"},forum:{ja:"旅の酒場",en:"Forum",ko:"여행자의 술집",ar:"منتدى المسافرين"},login:{ja:"ログイン",en:"Login",ko:"로그인",ar:"تسجيل الدخول"},logout:{ja:"ログアウト",en:"Logout",ko:"로그아웃",ar:"تسجيل الخروج"},profile:{ja:"プロフィール",en:"Profile",ko:"프로필",ar:"الملف الشخصي"}};return e.jsxs(e.Fragment,{children:[e.jsxs("nav",{className:"navbar fixed top-0 left-0 w-full bg-opacity-80 bg-black backdrop-blur-md z-50 border-b border-purple-900",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(E,{to:"/",className:"flex-shrink-0",children:e.jsx("h1",{className:"text-xl font-bold text-purple-400",children:"百鬼異世界"})})}),e.jsx("div",{className:"hidden md:block",children:e.jsxs("div",{className:"ml-10 flex items-center space-x-4",onMouseMove:j,children:[e.jsx(E,{to:"/",className:`px-3 py-2 rounded-md text-sm font-medium ${g.pathname==="/"?"text-white bg-purple-900":"text-gray-300 hover:text-white"}`,onMouseEnter:f,onMouseLeave:x,children:P.home[r]}),e.jsx(E,{to:"/server-info",className:`px-3 py-2 rounded-md text-sm font-medium ${g.pathname==="/server-info"?"text-white bg-purple-900":"text-gray-300 hover:text-white"}`,onMouseEnter:f,onMouseLeave:x,children:P.serverInfo[r]}),e.jsx(E,{to:"/rules",className:`px-3 py-2 rounded-md text-sm font-medium ${g.pathname==="/rules"?"text-white bg-purple-900":"text-gray-300 hover:text-white"}`,onMouseEnter:f,onMouseLeave:x,children:P.rules[r]}),e.jsx(E,{to:"/character",className:`px-3 py-2 rounded-md text-sm font-medium ${g.pathname==="/character"?"text-white bg-purple-900":"text-gray-300 hover:text-white"}`,onMouseEnter:f,onMouseLeave:x,children:P.character[r]}),e.jsx(E,{to:"/forum",className:`px-3 py-2 rounded-md text-sm font-medium ${g.pathname==="/forum"?"text-white bg-purple-900":"text-gray-300 hover:text-white"}`,onMouseEnter:f,onMouseLeave:x,children:P.forum[r]}),w?e.jsxs(e.Fragment,{children:[e.jsxs(E,{to:"/profile",className:`px-3 py-2 rounded-md text-sm font-medium ${g.pathname==="/profile"?"text-white bg-purple-900":"text-gray-300 hover:text-white"}`,onMouseEnter:f,onMouseLeave:x,children:[e.jsx(T,{className:"h-4 w-4 inline-block mr-1"}),P.profile[r]]}),e.jsx("button",{onClick:M,className:"px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:text-white",onMouseEnter:f,onMouseLeave:x,children:P.logout[r]})]}):e.jsx(E,{to:"/login",className:`px-3 py-2 rounded-md text-sm font-medium ${g.pathname==="/login"?"text-white bg-purple-900":"text-gray-300 hover:text-white"}`,onMouseEnter:f,onMouseLeave:x,children:P.login[r]}),e.jsx("div",{className:"relative inline-block text-left",children:e.jsxs("button",{type:"button",className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-purple-800 focus:outline-none",onMouseEnter:f,onMouseLeave:x,onClick:()=>{const A={ja:"en",en:"ko",ko:"ar",ar:"ja"}[r];c(A)},children:[e.jsx(K,{className:"h-5 w-5"}),e.jsx("span",{className:"ml-2",children:r.toUpperCase()})]})})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{type:"button",className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-purple-800 focus:outline-none",onClick:o,children:t?e.jsx(Ne,{className:"h-5 w-5"}):e.jsx(ke,{className:"h-5 w-5"})}),!t&&e.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:d,onChange:p,className:"volume-slider hidden md:block"}),e.jsx("div",{className:"md:hidden",children:e.jsx("button",{type:"button",className:"mobile-menu-button inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-purple-800 focus:outline-none",onClick:y,children:l?e.jsx(ie,{className:"h-6 w-6"}):e.jsx(Ce,{className:"h-6 w-6"})})})]})]})}),e.jsx("div",{className:`md:hidden ${l?"block":"hidden"}`,children:e.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-black bg-opacity-90",children:[e.jsx(E,{to:"/",className:`block px-3 py-2 rounded-md text-base font-medium ${g.pathname==="/"?"text-white bg-purple-900":"text-gray-300 hover:text-white"}`,children:P.home[r]}),e.jsx(E,{to:"/server-info",className:`block px-3 py-2 rounded-md text-base font-medium ${g.pathname==="/server-info"?"text-white bg-purple-900":"text-gray-300 hover:text-white"}`,children:P.serverInfo[r]}),e.jsx(E,{to:"/rules",className:`block px-3 py-2 rounded-md text-base font-medium ${g.pathname==="/rules"?"text-white bg-purple-900":"text-gray-300 hover:text-white"}`,children:P.rules[r]}),e.jsx(E,{to:"/character",className:`block px-3 py-2 rounded-md text-base font-medium ${g.pathname==="/character"?"text-white bg-purple-900":"text-gray-300 hover:text-white"}`,children:P.character[r]}),e.jsx(E,{to:"/forum",className:`block px-3 py-2 rounded-md text-base font-medium ${g.pathname==="/forum"?"text-white bg-purple-900":"text-gray-300 hover:text-white"}`,children:P.forum[r]}),w?e.jsxs(e.Fragment,{children:[e.jsxs(E,{to:"/profile",className:`block px-3 py-2 rounded-md text-base font-medium ${g.pathname==="/profile"?"text-white bg-purple-900":"text-gray-300 hover:text-white"}`,children:[e.jsx(T,{className:"h-4 w-4 inline-block mr-1"}),P.profile[r]]}),e.jsx("button",{onClick:M,className:"block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white",children:P.logout[r]})]}):e.jsx(E,{to:"/login",className:`block px-3 py-2 rounded-md text-base font-medium ${g.pathname==="/login"?"text-white bg-purple-900":"text-gray-300 hover:text-white"}`,children:P.login[r]}),e.jsx("div",{className:"flex items-center px-3 py-2",children:e.jsxs("button",{type:"button",className:"inline-flex items-center justify-center rounded-md text-gray-400 hover:text-white focus:outline-none",onClick:()=>{const A={ja:"en",en:"ko",ko:"ar",ar:"ja"}[r];c(A)},children:[e.jsx(K,{className:"h-5 w-5"}),e.jsx("span",{className:"ml-2",children:r.toUpperCase()})]})})]})})]}),h&&e.jsx("div",{className:"magic-particles",style:{left:`${i.x-50}px`,top:`${i.y-50}px`,opacity:.5}})]})},pe=a.createContext(void 0),Ge=({children:t})=>{const[n,d]=a.useState(null),[m,l]=a.useState(null),[s,h]=a.useState(null),[b,i]=a.useState([]),[v,r]=a.useState({server:!1,world:!1,rankings:!1,posts:!1}),[c,w]=a.useState({server:null,world:null,rankings:null,posts:null}),S=async()=>{r(o=>({...o,server:!0})),w(o=>({...o,server:null}));try{const o=await Be.getStatus();d(o)}catch(o){w(p=>({...p,server:o.message}))}finally{r(o=>({...o,server:!1}))}},u=async()=>{r(o=>({...o,world:!0})),w(o=>({...o,world:null}));try{const o=await Fe.getWorldMap();l(o)}catch(o){w(p=>({...p,world:o.message}))}finally{r(o=>({...o,world:!1}))}},g=async()=>{r(o=>({...o,rankings:!0})),w(o=>({...o,rankings:null}));try{const o=await qe.getRankings();h(o)}catch(o){w(p=>({...p,rankings:o.message}))}finally{r(o=>({...o,rankings:!1}))}},y=async()=>{r(o=>({...o,posts:!0})),w(o=>({...o,posts:null}));try{const o=await _.getPosts();i(o)}catch(o){w(p=>({...p,posts:o.message}))}finally{r(o=>({...o,posts:!1}))}};return e.jsx(pe.Provider,{value:{serverStatus:n,worldMap:m,rankings:s,posts:b,loading:v,error:c,fetchServerStatus:S,fetchWorldMap:u,fetchRankings:g,fetchPosts:y},children:t})},Q=()=>{const t=a.useContext(pe);if(t===void 0)throw new Error("useApi must be used within an ApiProvider");return t},Je=()=>{var S;const t=q(),{language:n}=D(),{serverStatus:d,fetchServerStatus:m,loading:l}=Q(),[s,h]=a.useState(!1),[b,i]=a.useState(""),[v,r]=a.useState(!1);a.useEffect(()=>{const u=setTimeout(()=>{h(!0)},500);return()=>clearTimeout(u)},[]),a.useEffect(()=>{m()},[]),a.useEffect(()=>{const u=g=>{if(g.key==="Escape"){i(""),r(!1);return}if(g.key==="Backspace"){i(y=>y.slice(0,-1));return}g.key.length===1&&i(y=>y+g.key),(b.includes("hyakki")||b.includes("百鬼"))&&r(!0)};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[b]);const c={title:{ja:"百鬼異世界",en:"Hyakki Isekai",ko:"백귀이세계",ar:"هياكي إيسيكاي"},subtitle:{ja:"異世界サバイバルMinecraftサーバー",en:"Isekai Survival Minecraft Server",ko:"이세계 서바이벌 마인크래프트 서버",ar:"خادم ماينكرافت للبقاء على قيد الحياة في عالم آخر"},startAdventure:{ja:"冒険を始める",en:"Start Adventure",ko:"모험 시작하기",ar:"ابدأ المغامرة"},serverStatus:{ja:"サーバーステータス",en:"Server Status",ko:"서버 상태",ar:"حالة الخادم"},online:{ja:"オンライン",en:"Online",ko:"온라인",ar:"متصل"},offline:{ja:"オフライン",en:"Offline",ko:"오프라인",ar:"غير متصل"},players:{ja:"プレイヤー",en:"Players",ko:"플레이어",ar:"اللاعبين"},currentEvent:{ja:"現在のイベント",en:"Current Event",ko:"현재 이벤트",ar:"الحدث الحالي"},bloodMoonFestival:{ja:"血月祭",en:"Blood Moon Festival",ko:"핏빛 달 축제",ar:"مهرجان القمر الدموي"},secretCommand:{ja:"隠しコマンド検出: 百鬼の秘密が明らかに...",en:"Secret Command Detected: Hyakki secrets revealed...",ko:"숨겨진 명령 감지: 백귀의 비밀이 드러납니다...",ar:"تم اكتشاف أمر سري: تم الكشف عن أسرار هياكي..."},secretInfo:{ja:"【極秘情報】最強の百鬼「虚無の王」が血月の夜に目覚める。準備せよ。",en:'[TOP SECRET] The strongest Hyakki "King of Void" awakens on the night of the blood moon. Be prepared.',ko:'[극비 정보] 가장 강력한 백귀 "공허의 왕"이 핏빛 달의 밤에 깨어납니다. 준비하십시오.',ar:'[سري للغاية] يستيقظ أقوى هياكي "ملك الفراغ" في ليلة القمر الدموي. كن مستعدا.'},loading:{ja:"読み込み中...",en:"Loading...",ko:"로딩 중...",ar:"جار التحميل..."}},w={blood_moon_festival:{ja:"血月祭",en:"Blood Moon Festival",ko:"핏빛 달 축제",ar:"مهرجان القمر الدموي"}};return e.jsx(N.div,{className:"content-container",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh]",children:[e.jsxs(N.div,{initial:{scale:.8,opacity:0},animate:{scale:s?1:.8,opacity:s?1:0,y:[0,-10,0]},transition:{duration:1,y:{repeat:1/0,duration:2,ease:"easeInOut"}},className:"mb-8 text-center",children:[e.jsx("h1",{className:"text-5xl md:text-7xl font-bold text-purple-400 mb-4 text-shadow",children:c.title[n]}),e.jsx("p",{className:"text-xl md:text-2xl text-purple-200",children:c.subtitle[n]})]}),e.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"magic-btn bg-purple-900 text-white px-8 py-4 rounded-md text-xl font-bold mb-12 border-2 border-purple-500 hover:bg-purple-800 transition-all duration-300 shadow-lg shadow-purple-900/50",onClick:()=>t("/character"),children:c.startAdventure[n]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-4xl",children:l.server?e.jsxs("div",{className:"col-span-3 text-center py-8",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{children:c.loading[n]})]}):d&&e.jsxs(e.Fragment,{children:[e.jsxs(N.div,{className:"card flex flex-col items-center p-6",whileHover:{y:-5,boxShadow:"0 10px 25px -5px rgba(138, 43, 226, 0.4)"},children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${d.online?"bg-green-500":"bg-red-500"}`}),e.jsx("h3",{className:"text-xl font-bold",children:c.serverStatus[n]})]}),e.jsx("p",{className:"text-lg mb-2",children:d.online?c.online[n]:c.offline[n]})]}),e.jsxs(N.div,{className:"card flex flex-col items-center p-6",whileHover:{y:-5,boxShadow:"0 10px 25px -5px rgba(138, 43, 226, 0.4)"},children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(oe,{className:"w-5 h-5 mr-2 text-purple-400"}),e.jsx("h3",{className:"text-xl font-bold",children:c.players[n]})]}),e.jsxs("p",{className:"text-lg mb-2",children:[d.players," / ",d.maxPlayers]})]}),e.jsxs(N.div,{className:"card flex flex-col items-center p-6",whileHover:{y:-5,boxShadow:"0 10px 25px -5px rgba(138, 43, 226, 0.4)"},children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(F,{className:"w-5 h-5 mr-2 text-purple-400"}),e.jsx("h3",{className:"text-xl font-bold",children:c.currentEvent[n]})]}),e.jsx("p",{className:"text-lg mb-2",children:((S=w[d.event])==null?void 0:S[n])||w.blood_moon_festival[n]})]})]})}),b&&e.jsxs("div",{className:"fixed bottom-4 left-4 bg-black bg-opacity-70 p-2 rounded text-green-400 font-mono",children:["> ",b]}),v&&e.jsx(N.div,{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-80",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs("div",{className:"bg-gray-900 border-2 border-purple-600 p-8 rounded-md max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(Se,{className:"w-6 h-6 text-red-500 mr-2"}),e.jsx("h3",{className:"text-xl font-bold text-red-400",children:c.secretCommand[n]})]}),e.jsx("p",{className:"text-lg mb-6 text-purple-200",children:c.secretInfo[n]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:"bg-purple-900 text-white px-4 py-2 rounded",onClick:()=>{r(!1),i("")},children:"OK"})})]})})]})})},Ve=()=>{var S;const{language:t}=D(),{serverStatus:n,worldMap:d,rankings:m,loading:l,error:s,fetchServerStatus:h,fetchWorldMap:b,fetchRankings:i}=Q(),[v,r]=a.useState("status");a.useEffect(()=>{h(),b(),i()},[]);const c={serverInfo:{ja:"サーバー情報",en:"Server Information",ko:"서버 정보",ar:"معلومات الخادم"},status:{ja:"ステータス",en:"Status",ko:"상태",ar:"الحالة"},map:{ja:"ワールドマップ",en:"World Map",ko:"월드맵",ar:"خريطة العالم"},rankings:{ja:"ランキング",en:"Rankings",ko:"랭킹",ar:"التصنيفات"},serverStatus:{ja:"サーバーステータス",en:"Server Status",ko:"서버 상태",ar:"حالة الخادم"},online:{ja:"オンライン",en:"Online",ko:"온라인",ar:"متصل"},players:{ja:"プレイヤー",en:"Players",ko:"플레이어",ar:"اللاعبين"},currentEvent:{ja:"現在のイベント",en:"Current Event",ko:"현재 이벤트",ar:"الحدث الحالي"},bloodMoonFestival:{ja:"血月祭",en:"Blood Moon Festival",ko:"핏빛 달 축제",ar:"مهرجان القمر الدموي"},uptime:{ja:"稼働時間",en:"Uptime",ko:"가동 시간",ar:"وقت التشغيل"},days:{ja:"日",en:"days",ko:"일",ar:"أيام"},hours:{ja:"時間",en:"hours",ko:"시간",ar:"ساعات"},minutes:{ja:"分",en:"minutes",ko:"분",ar:"دقائق"},worldMap:{ja:"ワールドマップ",en:"World Map",ko:"월드맵",ar:"خريطة العالم"},bossLocations:{ja:"ボス出現地点",en:"Boss Locations",ko:"보스 출현 지점",ar:"مواقع الزعماء"},defeatedBosses:{ja:"討伐済みボス",en:"Defeated Bosses",ko:"처치된 보스",ar:"الزعماء المهزومين"},hyakkiRanking:{ja:"百鬼討伐ランキング",en:"Hyakki Defeat Ranking",ko:"백귀 토벌 랭킹",ar:"تصنيف هزيمة هياكي"},pvpRanking:{ja:"PvPランキング",en:"PvP Ranking",ko:"PvP 랭킹",ar:"تصنيف لاعب ضد لاعب"},rank:{ja:"順位",en:"Rank",ko:"순위",ar:"مرتبة"},player:{ja:"プレイヤー",en:"Player",ko:"플레이어",ar:"لاعب"},defeats:{ja:"討伐数",en:"Defeats",ko:"처치 수",ar:"الهزائم"},kills:{ja:"キル数",en:"Kills",ko:"킬 수",ar:"عمليات القتل"},loading:{ja:"読み込み中...",en:"Loading...",ko:"로딩 중...",ar:"جار التحميل..."},error:{ja:"エラーが発生しました",en:"An error occurred",ko:"오류가 발생했습니다",ar:"حدث خطأ"},refresh:{ja:"更新",en:"Refresh",ko:"새로고침",ar:"تحديث"}},w={blood_moon_festival:{ja:"血月祭",en:"Blood Moon Festival",ko:"핏빛 달 축제",ar:"مهرجان القمر الدموي"}};return e.jsxs(N.div,{className:"content-container",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:[e.jsx("h1",{className:"text-4xl font-bold text-purple-400 mb-8 text-center",children:c.serverInfo[t]}),e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("div",{className:"bg-gray-900 rounded-lg overflow-hidden",children:e.jsxs("div",{className:"flex",children:[e.jsxs("button",{className:`px-6 py-3 flex items-center ${v==="status"?"bg-purple-900 text-white":"bg-gray-800 text-gray-300"}`,onClick:()=>r("status"),children:[e.jsx(ee,{className:"w-5 h-5 mr-2"}),c.status[t]]}),e.jsxs("button",{className:`px-6 py-3 flex items-center ${v==="map"?"bg-purple-900 text-white":"bg-gray-800 text-gray-300"}`,onClick:()=>r("map"),children:[e.jsx(Pe,{className:"w-5 h-5 mr-2"}),c.map[t]]}),e.jsxs("button",{className:`px-6 py-3 flex items-center ${v==="rankings"?"bg-purple-900 text-white":"bg-gray-800 text-gray-300"}`,onClick:()=>r("rankings"),children:[e.jsx(H,{className:"w-5 h-5 mr-2"}),c.rankings[t]]})]})})}),v==="status"&&e.jsxs(N.div,{className:"card p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-purple-300",children:c.serverStatus[t]}),e.jsxs("button",{className:"bg-purple-800 text-white px-3 py-1 rounded-md flex items-center text-sm",onClick:h,disabled:l.server,children:[l.server?e.jsx("span",{className:"animate-spin mr-1",children:"⟳"}):e.jsx("span",{children:"⟳"}),e.jsx("span",{className:"ml-1",children:c.refresh[t]})]})]}),l.server&&!n?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{children:c.loading[t]})]}):s.server?e.jsxs("div",{className:"bg-red-900 bg-opacity-50 text-white p-4 rounded-lg text-center",children:[e.jsx("p",{children:c.error[t]}),e.jsx("p",{className:"text-sm mt-2",children:s.server})]}):n&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"bg-gray-800 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${n.online?"bg-green-500":"bg-red-500"}`}),e.jsx("h3",{className:"text-xl font-medium",children:n.online?c.online[t]:c.offline[t]})]})}),e.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(oe,{className:"w-5 h-5 mr-2 text-purple-400"}),e.jsx("h3",{className:"text-xl font-medium",children:c.players[t]})]}),e.jsxs("p",{className:"text-2xl font-bold",children:[n.players," / ",n.maxPlayers]})]}),e.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(ee,{className:"w-5 h-5 mr-2 text-purple-400"}),e.jsx("h3",{className:"text-xl font-medium",children:c.currentEvent[t]})]}),e.jsx("p",{className:"text-xl",children:((S=w[n.event])==null?void 0:S[t])||w.blood_moon_festival[t]})]}),e.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(Ae,{className:"w-5 h-5 mr-2 text-purple-400"}),e.jsx("h3",{className:"text-xl font-medium",children:c.uptime[t]})]}),e.jsxs("p",{className:"text-xl",children:[n.uptime.days," ",c.days[t]," ",n.uptime.hours," ",c.hours[t]," ",n.uptime.minutes," ",c.minutes[t]]})]})]})]}),v==="map"&&e.jsxs(N.div,{className:"card p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-purple-300",children:c.worldMap[t]}),e.jsxs("button",{className:"bg-purple-800 text-white px-3 py-1 rounded-md flex items-center text-sm",onClick:b,disabled:l.world,children:[l.world?e.jsx("span",{className:"animate-spin mr-1",children:"⟳"}):e.jsx("span",{children:"⟳"}),e.jsx("span",{className:"ml-1",children:c.refresh[t]})]})]}),l.world&&!d?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{children:c.loading[t]})]}):s.world?e.jsxs("div",{className:"bg-red-900 bg-opacity-50 text-white p-4 rounded-lg text-center",children:[e.jsx("p",{children:c.error[t]}),e.jsx("p",{className:"text-sm mt-2",children:s.world})]}):d&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("img",{src:"https://images.unsplash.com/photo-1524661135-423995f22d0b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1674&q=80",alt:"World Map",className:"w-full h-96 object-cover rounded-lg"}),d.bosses.map((u,g)=>e.jsx("div",{className:`absolute w-8 h-8 rounded-full flex items-center justify-center ${u.defeated?"bg-green-500":"bg-red-500"} bg-opacity-70`,style:{top:`${20+g*15}%`,left:`${15+g*17}%`,transform:"translate(-50%, -50%)",border:"2px solid white"},title:u.name,children:e.jsx("span",{className:"text-white font-bold",children:u.id})},u.id))]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-purple-300 mb-4",children:c.bossLocations[t]}),e.jsx("ul",{className:"space-y-2",children:d.bosses.map(u=>e.jsxs("li",{className:"flex items-center",children:[e.jsx("div",{className:`w-4 h-4 rounded-full ${u.defeated?"bg-green-500":"bg-red-500"} mr-3`}),e.jsxs("span",{className:"mr-2",children:[u.id,"."]}),e.jsx("span",{className:"font-medium",children:u.name}),e.jsx("span",{className:"mx-2",children:"-"}),e.jsx("span",{className:"text-gray-300",children:u.location})]},u.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-purple-300 mb-4",children:c.defeatedBosses[t]}),e.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[e.jsxs("div",{className:"text-3xl font-bold text-center",children:[d.defeatedCount," / ",d.totalCount]}),e.jsx("div",{className:"w-full bg-gray-700 h-4 rounded-full mt-4",children:e.jsx("div",{className:"bg-purple-600 h-4 rounded-full",style:{width:`${d.defeatedCount/d.totalCount*100}%`}})})]})]})]})]})]}),v==="rankings"&&e.jsxs(N.div,{className:"card p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-purple-300",children:c.rankings[t]}),e.jsxs("button",{className:"bg-purple-800 text-white px-3 py-1 rounded-md flex items-center text-sm",onClick:i,disabled:l.rankings,children:[l.rankings?e.jsx("span",{className:"animate-spin mr-1",children:"⟳"}):e.jsx("span",{children:"⟳"}),e.jsx("span",{className:"ml-1",children:c.refresh[t]})]})]}),l.rankings&&!m?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{children:c.loading[t]})]}):s.rankings?e.jsxs("div",{className:"bg-red-900 bg-opacity-50 text-white p-4 rounded-lg text-center",children:[e.jsx("p",{children:c.error[t]}),e.jsx("p",{className:"text-sm mt-2",children:s.rankings})]}):m&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-purple-300 mb-6",children:c.hyakkiRanking[t]}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"py-3 text-left",children:c.rank[t]}),e.jsx("th",{className:"py-3 text-left",children:c.player[t]}),e.jsx("th",{className:"py-3 text-right",children:c.defeats[t]})]})}),e.jsx("tbody",{children:m.hyakkiRanking.map(u=>e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-gray-800",children:[e.jsx("td",{className:"py-3",children:e.jsxs("div",{className:"flex items-center",children:[u.rank===1&&e.jsx(H,{className:"w-5 h-5 text-yellow-500 mr-1"}),u.rank===2&&e.jsx(H,{className:"w-5 h-5 text-gray-400 mr-1"}),u.rank===3&&e.jsx(H,{className:"w-5 h-5 text-yellow-700 mr-1"}),u.rank>3&&e.jsx("span",{className:"w-5 h-5 inline-block mr-1",children:u.rank})]})}),e.jsx("td",{className:"py-3 font-medium",children:u.player}),e.jsx("td",{className:"py-3 text-right font-bold",children:u.defeats})]},u.rank))})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-purple-300 mb-6",children:c.pvpRanking[t]}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"py-3 text-left",children:c.rank[t]}),e.jsx("th",{className:"py-3 text-left",children:c.player[t]}),e.jsx("th",{className:"py-3 text-right",children:c.kills[t]})]})}),e.jsx("tbody",{children:m.pvpRanking.map(u=>e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-gray-800",children:[e.jsx("td",{className:"py-3",children:e.jsxs("div",{className:"flex items-center",children:[u.rank===1&&e.jsx(H,{className:"w-5 h-5 text-yellow-500 mr-1"}),u.rank===2&&e.jsx(H,{className:"w-5 h-5 text-gray-400 mr-1"}),u.rank===3&&e.jsx(H,{className:"w-5 h-5 text-yellow-700 mr-1"}),u.rank>3&&e.jsx("span",{className:"w-5 h-5 inline-block mr-1",children:u.rank})]})}),e.jsx("td",{className:"py-3 font-medium",children:u.player}),e.jsx("td",{className:"py-3 text-right font-bold",children:u.kills})]},u.rank))})]})]})]})]})]})},Xe=()=>{var u;const{language:t}=D(),[n,d]=a.useState(!1),[m,l]=a.useState(!1),[s,h]=a.useState(0),[b,i]=a.useState(0),[v,r]=a.useState(!1);a.useEffect(()=>{const g=()=>{const o=document.getElementById("rules-container");if(o){const p=o.scrollTop,j=o.scrollHeight-o.clientHeight;h(p),i(j),p>100?r(!0):r(!1)}},y=document.getElementById("rules-container");if(y)return y.addEventListener("scroll",g),()=>y.removeEventListener("scroll",g)},[]);const c=()=>{if(s>=b*.8){l(!0);const g=document.createElement("div");g.className="magic-circle-effect",document.body.appendChild(g),setTimeout(()=>{g.remove(),d(!0)},2e3)}else alert("契約の書をすべて読んでください。 / Please read the entire contract. / 계약서를 모두 읽어주세요. / يرجى قراءة العقد بالكامل.")},w={rules:{ja:"百鬼異世界の契約の書",en:"Contract of Hyakki Isekai",ko:"백귀이세계의 계약서",ar:"عقد هياكي إيسيكاي"},introduction:{ja:"この契約は、あなたと百鬼異世界の間で結ばれるものである。以下の条項をよく読み、同意する場合のみ契約に署名せよ。",en:"This contract is established between you and Hyakki Isekai. Read the following terms carefully and sign only if you agree.",ko:"이 계약은 당신과 백귀이세계 사이에 체결됩니다. 다음 조항을 주의 깊게 읽고 동의하는 경우에만 계약에 서명하십시오.",ar:"تم إنشاء هذا العقد بينك وبين هياكي إيسيكاي. اقرأ الشروط التالية بعناية ووقع فقط إذا كنت توافق."},agree:{ja:"契約に同意する",en:"Agree to Contract",ko:"계약에 동의합니다",ar:"أوافق على العقد"},confirmation:{ja:"契約が結ばれました。あなたの魂は百鬼異世界に繋がれました。",en:"The contract has been established. Your soul is now bound to Hyakki Isekai.",ko:"계약이 체결되었습니다. 당신의 영혼은 이제 백귀이세계에 묶여 있습니다.",ar:"تم إنشاء العقد. روحك الآن مرتبطة بـ هياكي إيسيكاي."},scrollToRead:{ja:"スクロールして全文を読む",en:"Scroll to read the entire document",ko:"스크롤하여 전체 문서 읽기",ar:"قم بالتمرير لقراءة المستند بالكامل"}},S={ja:["第1条: 全ての冒険者は、百鬼異世界に入る前に本契約に同意しなければならない。","第2条: 他の冒険者への意図的な妨害行為は禁止する。違反者は異世界から追放される。","第3条: 初心者エリアでのPvPは禁止。違反者には厳しい罰則が課される。","第4条: チートやハックの使用は厳禁。発見次第、永久追放の対象となる。","第5条: 全ての冒険者は、世界の調和を乱す行為を慎まなければならない。","第6条: 血月の夜には特別なルールが適用される。詳細は公式アナウンスを確認せよ。","第7条: 百鬼との契約は、一度結んだら破棄できない。慎重に選択せよ。","第8条: 異世界の資源は共有財産である。過剰な収集は禁止する。","第9条: 他の冒険者への暴言や嫌がらせは禁止。尊重の精神を持て。","第10条: サーバー管理者の指示には必ず従うこと。","第11条: 異世界の秘密を現実世界に漏らすことを禁ずる。","第12条: 百鬼討伐の報酬は、貢献度に応じて公平に分配される。","第13条: 異世界の魔法は、正しい目的のためにのみ使用すること。","第14条: 冒険者同士の取引は、双方の合意の下で行われなければならない。","第15条: 異世界の生態系を破壊する行為は厳禁。","第16条: 特定のイベント期間中は、追加のルールが適用される場合がある。","第17条: 冒険者は自身の行動に責任を持ち、結果を受け入れること。","第18条: 異世界の住人（NPC）に対する攻撃は、正当な理由がない限り禁止。","第19条: バグや不具合を発見した場合は、悪用せず速やかに報告すること。","第20条: 百鬼異世界での体験は、各冒険者の責任において行われる。","第21条: 契約違反者には、状況に応じた罰則が課される。","第22条: 本契約は予告なく変更される場合がある。最新版を常に確認すること。","第23条: 冒険者は定期的に異世界の掲示板をチェックし、重要な情報を見逃さないようにすること。","第24条: 異世界での死は、一時的な現象である。しかし、死に伴うペナルティは避けられない。","第25条: この契約に署名することで、あなたの魂は百鬼異世界と永遠に結びつく。"],en:["Article 1: All adventurers must agree to this contract before entering Hyakki Isekai.","Article 2: Intentional interference with other adventurers is prohibited. Violators will be banished from the other world.","Article 3: PvP is prohibited in beginner areas. Violators will face severe penalties.","Article 4: The use of cheats or hacks is strictly prohibited. Upon discovery, permanent banishment will be enforced.","Article 5: All adventurers must refrain from actions that disturb the harmony of the world.","Article 6: Special rules apply on the night of the blood moon. Check official announcements for details.","Article 7: Contracts with Hyakki cannot be discarded once formed. Choose wisely.","Article 8: Resources of the other world are shared property. Excessive collection is prohibited.","Article 9: Abusive language or harassment towards other adventurers is prohibited. Maintain a spirit of respect.","Article 10: Always follow the instructions of server administrators.","Article 11: It is forbidden to leak secrets of the other world to the real world.","Article 12: Rewards for defeating Hyakki are distributed fairly according to contribution.","Article 13: Magic of the other world should only be used for righteous purposes.","Article 14: Transactions between adventurers must be conducted under mutual agreement.","Article 15: Actions that destroy the ecosystem of the other world are strictly prohibited.","Article 16: Additional rules may apply during specific event periods.","Article 17: Adventurers must take responsibility for their actions and accept the consequences.","Article 18: Attacks on residents of the other world (NPCs) are prohibited without just cause.","Article 19: If bugs or defects are discovered, report them promptly without exploitation.","Article 20: Experiences in Hyakki Isekai are conducted at the responsibility of each adventurer.","Article 21: Contract violators will be subject to penalties according to the situation.","Article 22: This contract may be changed without notice. Always check for the latest version.","Article 23: Adventurers should regularly check the bulletin board of the other world to avoid missing important information.","Article 24: Death in the other world is a temporary phenomenon. However, penalties associated with death cannot be avoided.","Article 25: By signing this contract, your soul is eternally bound to Hyakki Isekai."],ko:["제1조: 모든 모험가는 백귀이세계에 들어가기 전에 본 계약에 동의해야 합니다.","제2조: 다른 모험가에 대한 의도적인 방해 행위는 금지됩니다. 위반자는 이세계에서 추방됩니다.","제3조: 초보자 구역에서의 PvP는 금지됩니다. 위반자에게는 엄격한 처벌이 부과됩니다.","제4조: 치트나 핵의 사용은 엄격히 금지됩니다. 발견 즉시 영구 추방 대상이 됩니다.","제5조: 모든 모험가는 세계의 조화를 방해하는 행위를 삼가야 합니다.","제6조: 핏빛 달의 밤에는 특별한 규칙이 적용됩니다. 자세한 내용은 공식 발표를 확인하세요.","제7조: 백귀와의 계약은 한 번 맺으면 파기할 수 없습니다. 신중하게 선택하세요.","제8조: 이세계의 자원은 공유 재산입니다. 과도한 수집은 금지됩니다.","제9조: 다른 모험가에 대한 욕설이나 괴롭힘은 금지됩니다. 존중의 정신을 가지세요.","제10조: 서버 관리자의 지시에 반드시 따라야 합니다.","제11조: 이세계의 비밀을 현실 세계에 누설하는 것을 금지합니다.","제12조: 백귀 토벌의 보상은 기여도에 따라 공정하게 분배됩니다.","제13조: 이세계의 마법은 올바른 목적을 위해서만 사용해야 합니다.","제14조: 모험가 간의 거래는 양측의 합의 하에 이루어져야 합니다.","제15조: 이세계의 생태계를 파괴하는 행위는 엄격히 금지됩니다.","제16조: 특정 이벤트 기간 중에는 추가 규칙이 적용될 수 있습니다.","제17조: 모험가는 자신의 행동에 책임을 지고 결과를 받아들여야 합니다.","제18조: 이세계 주민(NPC)에 대한 공격은 정당한 이유 없이 금지됩니다.","제19조: 버그나 결함을 발견한 경우 악용하지 말고 신속히 보고해야 합니다.","제20조: 백귀이세계에서의 경험은 각 모험가의 책임 하에 이루어집니다.","제21조: 계약 위반자에게는 상황에 따른 처벌이 부과됩니다.","제22조: 본 계약은 예고 없이 변경될 수 있습니다. 항상 최신 버전을 확인하세요.","제23조: 모험가는 정기적으로 이세계의 게시판을 확인하여 중요한 정보를 놓치지 않도록 해야 합니다.","제24조: 이세계에서의 죽음은 일시적인 현상입니다. 그러나 죽음에 따른 페널티는 피할 수 없습니다.","제25조: 이 계약에 서명함으로써 당신의 영혼은 백귀이세계와 영원히 연결됩니다."],ar:["المادة 1: يجب على جميع المغامرين الموافقة على هذا العقد قبل دخول هياكي إيسيكاي.","المادة 2: يُحظر التدخل المتعمد مع المغامرين الآخرين. سيتم نفي المخالفين من العالم الآخر.","المادة 3: يُحظر القتال بين اللاعبين في مناطق المبتدئين. سيواجه المخالفون عقوبات شديدة.","المادة 4: استخدام الغش أو الاختراق محظور بشدة. عند اكتشافه، سيتم فرض النفي الدائم.","المادة 5: يجب على جميع المغامرين الامتناع عن الأفعال التي تخل بانسجام العالم.","المادة 6: تنطبق قواعد خاصة في ليلة القمر الدموي. تحقق من الإعلانات الرسمية للحصول على التفاصيل.","المادة 7: لا يمكن التخلص من العقود مع هياكي بمجرد تشكيلها. اختر بحكمة.","المادة 8: موارد العالم الآخر هي ملكية مشتركة. يُحظر الجمع المفرط.","المادة 9: يُحظر استخدام لغة مسيئة أو مضايقة المغامرين الآخرين. حافظ على روح الاحترام.","المادة 10: اتبع دائمًا تعليمات مسؤولي الخادم.","المادة 11: يُمنع تسريب أسرار العالم الآخر إلى العالم الحقيقي.","المادة 12: يتم توزيع مكافآت هزيمة هياكي بشكل عادل وفقًا للمساهمة.","المادة 13: يجب استخدام سحر العالم الآخر للأغراض الصالحة فقط.","المادة 14: يجب إجراء المعاملات بين المغامرين بموجب اتفاق متبادل.","المادة 15: الأفعال التي تدمر النظام البيئي للعالم الآخر محظورة بشدة.","المادة 16: قد تنطبق قواعد إضافية خلال فترات الأحداث المحددة.","المادة 17: يجب على المغامرين تحمل مسؤولية أفعالهم وقبول العواقب.","المادة 18: يُحظر الهجوم على سكان العالم الآخر (الشخصيات غير اللاعبة) بدون سبب عادل.","المادة 19: إذا تم اكتشاف أخطاء أو عيوب، قم بالإبلاغ عنها فورًا دون استغلالها.","المادة 20: تتم تجارب في هياكي إيسيكاي على مسؤولية كل مغامر.","المادة 21: سيخضع مخالفو العقد لعقوبات وفقًا للموقف.","المادة 22: قد يتم تغيير هذا العقد دون إشعار. تحقق دائمًا من أحدث إصدار.","المادة 23: يجب على المغامرين التحقق بانتظام من لوحة الإعلانات في العالم الآخر لتجنب فقدان المعلومات المهمة.","المادة 24: الموت في العالم الآخر هو ظاهرة مؤقتة. ومع ذلك، لا يمكن تجنب العقوبات المرتبطة بالموت.","المادة 25: بالتوقيع على هذا العقد، ترتبط روحك أبديًا بـ هياكي إيسيكاي."]};return e.jsxs(N.div,{className:"content-container",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:[e.jsx("h1",{className:"text-4xl font-bold text-purple-400 mb-8 text-center",children:w.rules[t]}),n?e.jsxs(N.div,{className:"max-w-2xl mx-auto bg-gray-900 bg-opacity-80 rounded-lg p-8 shadow-lg text-center",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:[e.jsx("div",{className:"mb-6",children:e.jsx(Ee,{className:"w-16 h-16 text-green-500 mx-auto mb-4"})}),e.jsx("h2",{className:"text-2xl font-bold mb-4",children:w.confirmation[t]})]}):e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-gray-900 bg-opacity-80 rounded-lg p-8 shadow-lg mb-8",children:[e.jsx("p",{className:"text-xl mb-6",children:w.introduction[t]}),e.jsxs("div",{className:"text-center text-gray-400 mb-4",children:[e.jsx(le,{className:"inline-block mr-2 mb-1"}),w.scrollToRead[t]]}),e.jsx("div",{id:"rules-container",className:"max-h-96 overflow-y-auto pr-4 mb-8 rules-scroll",style:{backgroundImage:v?"linear-gradient(to bottom, rgba(255, 100, 0, 0.1), transparent)":"none"},children:e.jsx("ul",{className:"space-y-4",children:(u=S[t])==null?void 0:u.map((g,y)=>e.jsxs("li",{className:"flex",children:[e.jsx("span",{className:"text-purple-400 mr-2",children:"•"}),e.jsx("span",{children:g})]},y))})}),e.jsx("div",{className:"flex justify-center",children:e.jsx(N.button,{className:"magic-btn bg-purple-900 text-white px-8 py-4 rounded-md text-xl font-bold border-2 border-purple-500 hover:bg-purple-800 transition-all duration-300 shadow-lg shadow-purple-900/50",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:c,children:w.agree[t]})})]})}),m&&e.jsx("div",{className:"magic-circle-effect"}),e.jsx("style",{jsx:!0,children:`
        .rules-scroll::-webkit-scrollbar {
          width: 8px;
        }
        
        .rules-scroll::-webkit-scrollbar-track {
          background: rgba(30, 30, 30, 0.5);
          border-radius: 4px;
        }
        
        .rules-scroll::-webkit-scrollbar-thumb {
          background: rgba(138, 43, 226, 0.7);
          border-radius: 4px;
        }
        
        .rules-scroll::-webkit-scrollbar-thumb:hover {
          background: rgba(138, 43, 226, 1);
        }
        
        .magic-circle-effect {
          position: fixed;
          top: 0;
          left: 0;
          width: 100vw;
          height: 100vh;
          background-image: url('https://i.imgur.com/JlOBUKj.gif');
          background-size: cover;
          background-position: center;
          pointer-events: none;
          z-index: 50;
          opacity: 0.3;
          animation: fadeInOut 2s ease-in-out;
        }
        
        @keyframes fadeInOut {
          0% { opacity: 0; }
          50% { opacity: 0.3; }
          100% { opacity: 0; }
        }
      `})]})},Ke=()=>{const{language:t}=D(),{isLoggedIn:n,createCharacter:d,character:m,loading:l}=$(),s=q(),[h,b]=a.useState(""),[i,v]=a.useState(null),[r,c]=a.useState(null),[w,S]=a.useState(!1),[u,g]=a.useState(!1);a.useEffect(()=>{n||s("/login")},[n,s]),a.useEffect(()=>{m&&s("/")},[m,s]);const y={characterRegistration:{ja:"キャラクター登録",en:"Character Registration",ko:"캐릭터 등록",ar:"تسجيل الشخصية"},enterUsername:{ja:"ユーザー名を入力",en:"Enter Username",ko:"사용자 이름 입력",ar:"أدخل اسم المستخدم"},selectRace:{ja:"種族を選択",en:"Select Race",ko:"종족 선택",ar:"اختر العرق"},selectClass:{ja:"職業を選択",en:"Select Class",ko:"직업 선택",ar:"اختر الفئة"},human:{ja:"人間",en:"Human",ko:"인간",ar:"إنسان"},oni:{ja:"鬼",en:"Oni",ko:"오니",ar:"أوني"},fairy:{ja:"妖精",en:"Fairy",ko:"요정",ar:"جنية"},undead:{ja:"アンデッド",en:"Undead",ko:"언데드",ar:"غير ميت"},warrior:{ja:"戦士",en:"Warrior",ko:"전사",ar:"محارب"},mage:{ja:"魔導士",en:"Mage",ko:"마법사",ar:"ساحر"},thief:{ja:"盗賊",en:"Thief",ko:"도적",ar:"لص"},exorcist:{ja:"祓魔師",en:"Exorcist",ko:"퇴마사",ar:"طارد الأرواح"},register:{ja:"登録",en:"Register",ko:"등록",ar:"تسجيل"},formContract:{ja:"契約を結ぶ",en:"Form Contract",ko:"계약 체결",ar:"تشكيل العقد"},raceDescription:{human:{ja:"適応力が高く、あらゆる職業に適している。特殊 能力はないが、経験値獲得量が10%増加。",en:"Highly adaptable and suitable for any class. No special abilities, but experience gain is increased by 10%.",ko:"적응력이 높고 모든 직업에 적합합니다. 특수 능력은 없지만 경험치 획득량이 10% 증가합니다.",ar:"قابل للتكيف بدرجة عالية ومناسب لأي فئة. لا توجد قدرات خاصة، ولكن اكتساب الخبرة يزداد بنسبة 10٪."},oni:{ja:"強靭な肉体を持ち、物理攻撃に強い。夜間に攻撃力が25%上昇するが、昼間は5%低下する。",en:"Has a robust physique and strong against physical attacks. Attack power increases by 25% at night but decreases by 5% during the day.",ko:"강인한 육체를 가지고 물리 공격에 강합니다. 밤에는 공격력이 25% 증가하지만 낮에는 5% 감소합니다.",ar:"يتمتع ببنية قوية وقوي ضد الهجمات الجسدية. تزداد قوة الهجوم بنسبة 25٪ في الليل ولكنها تنخفض بنسبة 5٪ خلال النهار."},fairy:{ja:"魔法親和性が高く、MPの自然回復速度が速い。物理防御は低いが、魔法攻撃に対する耐性がある。",en:"High magic affinity and fast MP natural recovery rate. Low physical defense but resistant to magical attacks.",ko:"마법 친화성이 높고 MP 자연 회복 속도가 빠릅니다. 물리 방어력은 낮지만 마법 공격에 대한 저항력이 있습니다.",ar:"تقارب سحري عالي ومعدل استرداد طبيعي سريع للطاقة السحرية. دفاع جسدي منخفض ولكن مقاوم للهجمات السحرية."},undead:{ja:"不死の肉体を持ち、毒や病気に完全耐性がある。回復魔法の効果が半減するが、暗黒魔法の威力が増加。",en:"Has an immortal body with complete immunity to poison and disease. Healing magic effects are halved, but dark magic power is increased.",ko:"불사의 육체를 가지고 독과 질병에 완전 내성이 있습니다. 회복 마법의 효과가 절반으로 줄어들지만 암흑 마법의 위력이 증가합니다.",ar:"يمتلك جسدًا خالدًا مع حصانة كاملة ضد السم والمرض. تأثيرات السحر الشفائي تنخفض إلى النصف، لكن قوة السحر المظلم تزداد."}},classDescription:{warrior:{ja:"近接戦闘のスペシャリスト。高い防御力と攻撃力を持つが、魔法の使用は限られている。",en:"Specialist in close combat. Has high defense and attack power but limited use of magic.",ko:"근접 전투 전문가. 높은 방어력과 공격력을 가지고 있지만 마법 사용이 제한적입니다.",ar:"متخصص في القتال عن قرب. يتمتع بقوة دفاع وهجوم عالية ولكن استخدام السحر محدود."},mage:{ja:"強力な魔法を操る魔導士。遠距離攻撃に優れるが、物理防御が低い。",en:"Mage who controls powerful magic. Excels at ranged attacks but has low physical defense.",ko:"강력한 마법을 다루는 마법사. 원거리 공격에 뛰어나지만 물리 방어력이 낮습니다.",ar:"ساحر يتحكم في السحر القوي. يتفوق في الهجمات عن بعد ولكن لديه دفاع جسدي منخفض."},thief:{ja:"素早さと隠密行動に長けている。クリティカル率が高く、レア素材の発見率も上昇。",en:"Skilled in speed and stealth. High critical rate and increased chance of finding rare materials.",ko:"속도와 은밀 행동에 능숙합니다. 크리티컬 확률이 높고 희귀 재료 발견 확률도 증가합니다.",ar:"ماهر في السرعة والتخفي. معدل حرج مرتفع وزيادة فرصة العثور على مواد نادرة."},exorcist:{ja:"百鬼に対して特化した戦闘能力を持つ。百鬼への攻撃力が30%上昇し、特殊な封印魔法を使用可能。",en:"Has combat abilities specialized against Hyakki. Attack power against Hyakki increases by 30%, and can use special sealing magic.",ko:"백귀에 대해 특화된 전투 능력을 가집니다. 백귀에 대한 공격력이 30% 증가하고 특수한 봉인 마법을 사용할 수 있습니다.",ar:"لديه قدرات قتالية متخصصة ضد هياكي. تزداد قوة الهجوم ضد هياكي بنسبة 30٪، ويمكنه استخدام سحر الختم الخاص."}},usernameRequired:{ja:"ユーザー名を入力してください",en:"Please enter a username",ko:"사용자 이름을 입력하세요",ar:"الرجاء إدخال اسم المستخدم"},raceRequired:{ja:"種族を選択してください",en:"Please select a race",ko:"종족을 선택하세요",ar:"الرجاء اختيار العرق"},classRequired:{ja:"職業を選択してください",en:"Please select a class",ko:"직업을 선택하세요",ar:"الرجاء اختيار الفئة"},registrationComplete:{ja:"登録完了！",en:"Registration Complete!",ko:"등록 완료!",ar:"اكتمل التسجيل!"},welcomeMessage:{ja:"百鬼異世界へようこそ、",en:"Welcome to Hyakki Isekai, ",ko:"백귀이세계에 오신 것을 환영합니다, ",ar:"مرحبًا بك في هياكي إيسيكاي، "}},o=x=>{if(x.preventDefault(),!h){alert(y.usernameRequired[t]);return}if(!i){alert(y.raceRequired[t]);return}if(!r){alert(y.classRequired[t]);return}S(!0)},p=async()=>{if(!(!i||!r)){g(!0);try{await d(h,i,r);const x=document.createElement("div");x.className="lightning-effect",document.body.appendChild(x),setTimeout(()=>{x.remove(),s("/")},2e3)}catch(x){console.error("Character registration error:",x),g(!1),S(!1)}}},j=x=>{switch(x){case"human":return e.jsx(T,{className:"w-6 h-6"});case"oni":return e.jsx(F,{className:"w-6 h-6"});case"fairy":return e.jsx(Y,{className:"w-6 h-6"});case"undead":return e.jsx(ce,{className:"w-6 h-6"});default:return null}},f=x=>{switch(x){case"warrior":return e.jsx(F,{className:"w-6 h-6"});case"mage":return e.jsx(Le,{className:"w-6 h-6"});case"thief":return e.jsx(T,{className:"w-6 h-6"});case"exorcist":return e.jsx(Y,{className:"w-6 h-6"});default:return null}};return l||!n?e.jsx("div",{className:"content-container flex justify-center items-center min-h-[80vh]",children:e.jsx("div",{className:"w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full animate-spin"})}):e.jsxs(N.div,{className:"content-container",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:[e.jsx("h1",{className:"text-4xl font-bold text-purple-400 mb-8 text-center",children:y.characterRegistration[t]}),w?e.jsxs(N.div,{className:"max-w-2xl mx-auto bg-gray-900 bg-opacity-80 rounded-lg p-8 shadow-lg text-center",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:[e.jsxs("div",{className:"character-preview mb-8",children:[e.jsx("div",{className:"w-32 h-32 mx-auto bg-purple-800 rounded-full flex items-center justify-center mb-4 border-4 border-purple-500",children:i&&j(i)}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:h}),e.jsxs("div",{className:"flex justify-center items-center gap-4",children:[e.jsxs("div",{className:"bg-purple-900 px-3 py-1 rounded-full text-sm flex items-center",children:[i&&j(i),e.jsx("span",{className:"ml-1",children:i&&y[i][t]})]}),e.jsxs("div",{className:"bg-purple-900 px-3 py-1 rounded-full text-sm flex items-center",children:[r&&f(r),e.jsx("span",{className:"ml-1",children:r&&y[r][t]})]})]})]}),u?e.jsxs("div",{className:"registering-animation",children:[e.jsx("div",{className:"magic-circle-large"}),e.jsxs("p",{className:"text-xl mt-4 text-purple-300",children:[y.welcomeMessage[t],e.jsx("span",{className:"font-bold text-white",children:h})]})]}):e.jsx(N.button,{className:"magic-btn bg-purple-900 text-white px-8 py-4 rounded-md text-xl font-bold border-2 border-purple-500 hover:bg-purple-800 transition-all duration-300 shadow-lg shadow-purple-900/50",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:p,children:y.formContract[t]})]}):e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("form",{onSubmit:o,className:"bg-gray-900 bg-opacity-80 rounded-lg p-8 shadow-lg",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"username",className:"block text-gray-300 mb-2",children:y.enterUsername[t]}),e.jsx("input",{type:"text",id:"username",value:h,onChange:x=>b(x.target.value),className:"form-input bg-gray-800 text-white border-purple-700 rounded-md w-full",maxLength:20})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-xl text-purple-300 mb-4",children:y.selectRace[t]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["human","oni","fairy","undead"].map(x=>e.jsxs(N.div,{className:`p-4 rounded-lg cursor-pointer transition-all duration-300 ${i===x?"bg-purple-900 border-2 border-purple-500":"bg-gray-800 border-2 border-gray-700"}`,whileHover:{scale:1.02},onClick:()=>v(x),children:[e.jsxs("div",{className:"flex items-center mb-2",children:[j(x),e.jsx("h4",{className:"text-lg font-medium ml-2",children:y[x][t]})]}),e.jsx("p",{className:"text-sm text-gray-300",children:y.raceDescription[x][t]})]},x))})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-xl text-purple-300 mb-4",children:y.selectClass[t]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["warrior","mage","thief","exorcist"].map(x=>e.jsxs(N.div,{className:`p-4 rounded-lg cursor-pointer transition-all duration-300 ${r===x?"bg-purple-900 border-2 border-purple-500":"bg-gray-800 border-2 border-gray-700"}`,whileHover:{scale:1.02},onClick:()=>c(x),children:[e.jsxs("div",{className:"flex items-center mb-2",children:[f(x),e.jsx("h4",{className:"text-lg font-medium ml-2",children:y[x][t]})]}),e.jsx("p",{className:"text-sm text-gray-300",children:y.classDescription[x][t]})]},x))})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(N.button,{type:"submit",className:"magic-btn bg-purple-900 text-white px-8 py-4 rounded-md text-xl font-bold border-2 border-purple-500 hover:bg-purple-800 transition-all duration-300 shadow-lg shadow-purple-900/50",whileHover:{scale:1.05},whileTap:{scale:.95},children:y.register[t]})})]})}),i==="oni"&&e.jsx("div",{className:"oni-aura"}),i==="fairy"&&e.jsx("div",{className:"fairy-sparkles"}),i==="undead"&&e.jsx("div",{className:"undead-mist"}),e.jsx("style",{jsx:!0,children:`
        .oni-aura {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          pointer-events: none;
          background: radial-gradient(circle at center, rgba(255, 0, 0, 0.1) 0%, transparent 70%);
          z-index: -1;
          animation: pulse 3s infinite;
        }
        
        .fairy-sparkles {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          pointer-events: none;
          background-image: url('https://i.imgur.com/JlOBUKj.gif');
          background-size: cover;
          opacity: 0.1;
          z-index: -1;
        }
        
        .undead-mist {
          position: fixed;
          bottom: 0;
          left: 0;
          width: 100%;
          height: 30%;
          pointer-events: none;
          background: linear-gradient(to top, rgba(0, 255, 0, 0.1), transparent);
          z-index: -1;
        }
        
        .magic-circle-large {
          width: 150px;
          height: 150px;
          margin: 0 auto;
          background-image: url('https://i.imgur.com/JlOBUKj.gif');
          background-size: contain;
          background-repeat: no-repeat;
          animation: rotate 3s linear infinite;
        }
        
        .lightning-effect {
          position: fixed;
          top: 0;
          left: 0;
          width: 100vw;
          height: 100vh;
          background-color: white;
          opacity: 0;
          pointer-events: none;
          z-index: 9999;
          animation: lightning 2s ease-out;
        }
        
        @keyframes lightning {
          0% { opacity: 0; }
          10% { opacity: 0.8; }
          15% { opacity: 0.2; }
          20% { opacity: 0.9; }
          25% { opacity: 0.3; }
          30% { opacity: 0.7; }
          100% { opacity: 0; }
        }
        
        @keyframes pulse {
          0% { opacity: 0.1; }
          50% { opacity: 0.2; }
          100% { opacity: 0.1; }
        }
        
        @keyframes rotate {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})},Ye=()=>{const{language:t}=D(),{isLoggedIn:n,token:d}=$(),{posts:m,loading:l,error:s,fetchPosts:h}=Q(),[b,i]=a.useState(""),[v,r]=a.useState(!1),[c,w]=a.useState(""),[S,u]=a.useState(!1),[g,y]=a.useState(!1);a.useEffect(()=>{h()},[]);const o=async f=>{if(f.preventDefault(),!n){w(j.loginRequired[t]),r(!0),setTimeout(()=>r(!1),3e3);return}if(b.trim()){y(!0);try{await _.createPost(d,b),i(""),h(),(b.includes("乾杯")||b.includes("cheers")||b.includes("건배")||b.includes("نخب"))&&(u(!0),setTimeout(()=>u(!1),3e3))}catch(x){w(x.message),r(!0),setTimeout(()=>r(!1),3e3)}finally{y(!1)}}},p=async f=>{if(!n){w(j.loginRequired[t]),r(!0),setTimeout(()=>r(!1),3e3);return}try{await _.likePost(d,f),h()}catch(x){w(x.message),r(!0),setTimeout(()=>r(!1),3e3)}},j={forum:{ja:"旅の酒場",en:"Traveler's Tavern",ko:"여행자의 술집",ar:"حانة المسافر"},writePost:{ja:"投稿を書く...",en:"Write a post...",ko:"게시물 작성...",ar:"اكتب منشورًا..."},post:{ja:"投稿",en:"Post",ko:"게시",ar:"نشر"},justNow:{ja:"たった今",en:"Just now",ko:"방금",ar:"الآن فقط"},loginRequired:{ja:"投稿するにはログインが必要です",en:"Login required to post",ko:"게시하려면 로그인이 필요합니다",ar:"تسجيل الدخول مطلوب للنشر"},hoursAgo:{ja:"時間前",en:"hours ago",ko:"시간 전",ar:"منذ ساعات"},daysAgo:{ja:"日前",en:"days ago",ko:"일 전",ar:"منذ أيام"},loading:{ja:"読み込み中...",en:"Loading...",ko:"로딩 중...",ar:"جار التحميل..."},error:{ja:"エラーが発生しました",en:"An error occurred",ko:"오류가 발생했습니다",ar:"حدث خطأ"},refresh:{ja:"更新",en:"Refresh",ko:"새로고침",ar:"تحديث"},noPosts:{ja:"投稿がありません",en:"No posts yet",ko:"게시물이 없습니다",ar:"لا توجد منشورات بعد"}};return e.jsxs(N.div,{className:"content-container",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:[e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("h1",{className:"text-4xl font-bold text-purple-400",children:[e.jsx(Ie,{className:"inline-block mr-3 mb-1"}),j.forum[t]]}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"bg-purple-900 px-3 py-1 rounded-full text-sm flex items-center mr-3",children:[e.jsx(K,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:t.toUpperCase()})]}),e.jsxs("button",{className:"bg-purple-800 text-white px-3 py-1 rounded-md flex items-center text-sm",onClick:h,disabled:l.posts,children:[l.posts?e.jsx("span",{className:"animate-spin mr-1",children:"⟳"}):e.jsx("span",{children:"⟳"}),e.jsx("span",{className:"ml-1",children:j.refresh[t]})]})]})]}),e.jsx("div",{className:"bg-gray-900 bg-opacity-80 rounded-lg p-6 mb-8",children:e.jsxs("form",{onSubmit:o,className:"flex items-center",children:[e.jsx("input",{type:"text",value:b,onChange:f=>i(f.target.value),placeholder:j.writePost[t],className:"form-input bg-gray-800 text-white border-purple-700 rounded-md flex-grow mr-4",disabled:g}),e.jsxs(N.button,{type:"submit",className:"bg-purple-700 text-white px-4 py-2 rounded-md flex items-center",whileHover:{scale:1.05},whileTap:{scale:.95},disabled:g||!b.trim(),children:[g?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):e.jsx(Me,{className:"w-4 h-4 mr-2"}),j.post[t]]})]})}),l.posts&&m.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{children:j.loading[t]})]}):s.posts?e.jsxs("div",{className:"bg-red-900 bg-opacity-50 text-white p-4 rounded-lg text-center",children:[e.jsx("p",{children:j.error[t]}),e.jsx("p",{className:"text-sm mt-2",children:s.posts})]}):m.length===0?e.jsx("div",{className:"text-center py-8 bg-gray-900 bg-opacity-80 rounded-lg",children:e.jsx("p",{className:"text-gray-400",children:j.noPosts[t]})}):e.jsx("div",{className:"space-y-6",children:m.map(f=>e.jsxs(N.div,{className:"bg-gray-900 bg-opacity-80 rounded-lg p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-800 rounded-full flex items-center justify-center mr-3",children:e.jsx(T,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:f.author}),e.jsx("p",{className:"text-gray-400 text-sm",children:f.displayTime||f.timestamp})]})]}),e.jsx("p",{className:"mb-4",children:f.content}),e.jsx("div",{className:"flex items-center",children:e.jsxs("button",{className:`flex items-center ${f.userLiked.includes(d||"")?"text-purple-400":"text-gray-400"} hover:text-purple-400 transition-colors duration-200`,onClick:()=>p(f.id),children:[e.jsx(de,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:f.likes})]})})]},f.id))})]}),v&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-red-900 text-white px-4 py-2 rounded-md shadow-lg",children:c}),S&&e.jsxs("div",{className:"cheers-effect",children:[e.jsx("div",{className:"beer-mug left"}),e.jsx("div",{className:"beer-mug right"}),e.jsx("div",{className:"cheers-text",children:"🍻 CHEERS! 乾杯! 건배! نخب! 🍻"})]}),e.jsx("style",{jsx:!0,children:`
        .cheers-effect {
          position: fixed;
          top: 0;
          left: 0;
          width: 100vw;
          height: 100vh;
          pointer-events: none;
          z-index: 100;
        }
        
        .beer-mug {
          position: absolute;
          width: 100px;
          height: 100px;
          background-image: url('https://i.imgur.com/XzMxmvC.gif');
          background-size: contain;
          background-repeat: no-repeat;
        }
        
        .beer-mug.left {
          top: 50%;
          left: 30%;
          transform: translateY(-50%);
          animation: moveLeft 3s ease-in-out;
        }
        
        .beer-mug.right {
          top: 50%;
          right: 30%;
          transform: translateY(-50%) scaleX(-1);
          animation: moveRight 3s ease-in-out;
        }
        
        .cheers-text {
          position: absolute;
          top: 40%;
          left: 50%;
          transform: translate(-50%, -50%);
          font-size: 32px;
          font-weight: bold;
          color: gold;
          text-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
          opacity: 0;
          animation: fadeInOut 3s ease-in-out;
        }
        
        @keyframes moveLeft {
          0% { left: 20%; }
          50% { left: 40%; }
          100% { left: 20%; }
        }
        
        @keyframes moveRight {
          0% { right: 20%; }
          50% { right: 40%; }
          100% { right: 20%; }
        }
        
        @keyframes fadeInOut {
          0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
          20% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
          80% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
          100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
        }
      `})]})},_e=()=>{const{language:t}=D(),{login:n,register:d,loading:m,error:l,loginWithDiscord:s}=$(),h=q(),b=Z(),[i,v]=a.useState(!0),[r,c]=a.useState(""),[w,S]=a.useState(""),[u,g]=a.useState(""),[y,o]=a.useState(!1);a.useEffect(()=>{const M=new URLSearchParams(b.search).get("token");M&&b.pathname==="/auth-callback"&&(localStorage.setItem("token",M),o(!0),setTimeout(()=>{h("/")},2e3))},[b,h]);const p={login:{ja:"ログイン",en:"Login",ko:"로그인",ar:"تسجيل الدخول"},register:{ja:"登録",en:"Register",ko:"등록",ar:"تسجيل"},username:{ja:"ユーザー名",en:"Username",ko:"사용자 이름",ar:"اسم المستخدم"},email:{ja:"メールアドレス",en:"Email",ko:"이메일",ar:"البريد الإلكتروني"},password:{ja:"パスワード",en:"Password",ko:"비밀번호",ar:"كلمة المرور"},loginWithDiscord:{ja:"Discordでログイン",en:"Login with Discord",ko:"Discord로 로그인",ar:"تسجيل الدخول باستخدام Discord"},loginFailed:{ja:"ログインに失敗しました。呪われた契約は拒否されました。",en:"Login failed. The cursed contract has been rejected.",ko:"로그인에 실패했습니다. 저주받은 계약이 거부되었습니다.",ar:"فشل تسجيل الدخول. تم رفض العقد الملعون."},enterUsername:{ja:"ユーザー名を入力してください",en:"Please enter your username",ko:"사용자 이름을 입력하세요",ar:"الرجاء إدخال اسم المستخدم الخاص بك"},enterEmail:{ja:"メールアドレスを入力してください",en:"Please enter your email",ko:"이메일을 입력하세요",ar:"الرجاء إدخال البريد الإلكتروني الخاص بك"},enterPassword:{ja:"パスワードを入力してください",en:"Please enter your password",ko:"비밀번호를 입력하세요",ar:"الرجاء إدخال كلمة المرور الخاصة بك"},noAccount:{ja:"アカウントをお持ちでないですか？",en:"Don't have an account?",ko:"계정이 없으신가요?",ar:"ليس لديك حساب؟"},haveAccount:{ja:"すでにアカウントをお持ちですか？",en:"Already have an account?",ko:"이미 계정이 있으신가요?",ar:"هل لديك حساب بالفعل؟"},createAccount:{ja:"アカウントを作成",en:"Create Account",ko:"계정 만들기",ar:"إنشاء حساب"}},j=async x=>{x.preventDefault();try{if(i){if(!w||!u)return;await n(w,u)}else{if(!r||!w||!u)return;await d(r,w,u)}o(!0),setTimeout(()=>{h("/")},2e3)}catch(M){console.error("Authentication error:",M)}},f=()=>{s()};return e.jsxs(N.div,{className:"content-container",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:[e.jsx("div",{className:"flex justify-center items-center min-h-[80vh]",children:e.jsxs(N.div,{className:"bg-gray-900 bg-opacity-80 rounded-lg p-8 shadow-lg max-w-md w-full",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5},children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(te,{className:"w-12 h-12 text-purple-400 mx-auto mb-2"}),e.jsx("h1",{className:"text-3xl font-bold text-purple-400",children:i?p.login[t]:p.register[t]})]}),l&&e.jsxs(N.div,{className:"bg-red-900 bg-opacity-70 text-white p-4 rounded-md mb-6 flex items-center",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsx(Te,{className:"w-5 h-5 mr-2 flex-shrink-0"}),e.jsx("p",{children:l})]}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[!i&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-gray-300 mb-2",children:p.username[t]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(T,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",id:"username",value:r,onChange:x=>c(x.target.value),className:"form-input bg-gray-800 text-white border-purple-700 rounded-md w-full pl-10",placeholder:p.enterUsername[t],disabled:m})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-gray-300 mb-2",children:p.email[t]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(me,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"email",id:"email",value:w,onChange:x=>S(x.target.value),className:"form-input bg-gray-800 text-white border-purple-700 rounded-md w-full pl-10",placeholder:p.enterEmail[t],disabled:m})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-gray-300 mb-2",children:p.password[t]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Re,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"password",id:"password",value:u,onChange:x=>g(x.target.value),className:"form-input bg-gray-800 text-white border-purple-700 rounded-md w-full pl-10",placeholder:p.enterPassword[t],disabled:m})]})]}),e.jsx("div",{className:"pt-2",children:e.jsx(N.button,{type:"submit",className:"w-full bg-purple-700 text-white py-3 rounded-md font-bold hover:bg-purple-600 transition-colors duration-300 flex items-center justify-center",whileHover:{scale:1.02},whileTap:{scale:.98},disabled:m,children:m?e.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"w-5 h-5 mr-2"}),i?p.login[t]:p.register[t]]})})})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("button",{type:"button",className:"text-purple-400 hover:text-purple-300 text-sm",onClick:()=>v(!i),disabled:m,children:[i?p.noAccount[t]:p.haveAccount[t]," ",e.jsx("span",{className:"font-bold",children:i?p.createAccount[t]:p.login[t]})]})}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-700",children:e.jsx(N.button,{className:"w-full bg-indigo-700 text-white py-3 rounded-md font-bold hover:bg-indigo-600 transition-colors duration-300 flex items-center justify-center",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:f,disabled:m,children:m?e.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 71 55",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M60.1045 4.8978C55.5792 2.8214 50.7265 1.2916 45.6527 0.41542C45.5603 0.39851 45.468 0.440769 45.4204 0.525289C44.7963 1.6353 44.105 3.0834 43.6209 4.2216C38.1637 3.4046 32.7345 3.4046 27.3892 4.2216C26.905 3.0581 26.1886 1.6353 25.5617 0.525289C25.5141 0.443589 25.4218 0.40133 25.3294 0.41542C20.2584 1.2888 15.4057 2.8186 10.8776 4.8978C10.8384 4.9147 10.8048 4.9429 10.7825 4.9795C1.57795 18.7309 -0.943561 32.1443 0.293408 45.3914C0.299005 45.4562 0.335386 45.5182 0.385761 45.5576C6.45866 50.0174 12.3413 52.7249 18.1147 54.5195C18.2071 54.5477 18.305 54.5139 18.3638 54.4378C19.7295 52.5728 20.9469 50.6063 21.9907 48.5383C22.0523 48.4172 21.9935 48.2735 21.8676 48.2256C19.9366 47.4931 18.0979 46.6 16.3292 45.5858C16.1893 45.5041 16.1781 45.304 16.3068 45.2082C16.679 44.9293 17.0513 44.6391 17.4067 44.3461C17.471 44.2926 17.5606 44.2813 17.6362 44.3151C29.2558 49.6202 41.8354 49.6202 53.3179 44.3151C53.3935 44.2785 53.4831 44.2898 53.5502 44.3433C53.9057 44.6363 54.2779 44.9293 54.6529 45.2082C54.7816 45.304 54.7732 45.5041 54.6333 45.5858C52.8646 46.6197 51.0259 47.4931 49.0921 48.2228C48.9662 48.2707 48.9102 48.4172 48.9718 48.5383C50.038 50.6034 51.2554 52.5699 52.5959 54.435C52.6519 54.5139 52.7526 54.5477 52.845 54.5195C58.6464 52.7249 64.529 50.0174 70.6019 45.5576C70.6551 45.5182 70.6887 45.459 70.6943 45.3942C72.1747 30.0791 68.2147 16.7757 60.1968 4.9823C60.1772 4.9429 60.1437 4.9147 60.1045 4.8978ZM23.7259 37.3253C20.2276 37.3253 17.3451 34.1136 17.3451 30.1693C17.3451 26.225 20.1717 23.0133 23.7259 23.0133C27.308 23.0133 30.1626 26.2532 30.1066 30.1693C30.1066 34.1136 27.28 37.3253 23.7259 37.3253ZM47.3178 37.3253C43.8196 37.3253 40.9371 34.1136 40.9371 30.1693C40.9371 26.225 43.7636 23.0133 47.3178 23.0133C50.9 23.0133 53.7545 26.2532 53.6986 30.1693C53.6986 34.1136 50.9 37.3253 47.3178 37.3253Z",fill:"#ffffff"})}),p.loginWithDiscord[t]]})})})]})}),y&&e.jsxs("div",{className:"door-animation",children:[e.jsx("div",{className:"door left"}),e.jsx("div",{className:"door right"})]}),e.jsx("style",{jsx:"true",children:`
        .door-animation {
          position: fixed;
          top: 0;
          left: 0;
          width: 100vw;
          height: 100vh;
          z-index: 100;
          pointer-events: none;
        }
        
        .door {
          position: absolute;
          top: 0;
          height: 100%;
          width: 50%;
          background-color: #000;
          transition: transform 2s ease-in-out;
        }
        
        .door.left {
          left: 0;
          transform: translateX(-100%);
          animation: doorLeft 2s forwards;
        }
        
        .door.right {
          right: 0;
          transform: translateX(100%);
          animation: doorRight 2s forwards;
        }
        
        @keyframes doorLeft {
          0% { transform: translateX(0); }
          100% { transform: translateX(-100%); }
        }
        
        @keyframes doorRight {
          0% { transform: translateX(0); }
          100% { transform: translateX(100%); }
        }
      `})]})},Ze=()=>{const t=q(),n=Z(),{token:d,isLoggedIn:m}=$(),[l,s]=a.useState(null),[h,b]=a.useState(!0);return a.useEffect(()=>{m?t("/"):(async()=>{try{const r=new URLSearchParams(n.search).get("token");if(!r){s("No authentication token received"),b(!1);return}localStorage.setItem("token",r);const c=await B.getCurrentUser(r);localStorage.setItem("user",JSON.stringify(c.user)),setTimeout(()=>{t("/")},2e3)}catch(v){s(v.message),b(!1)}})()},[n,t,m]),h?e.jsx("div",{className:"content-container flex justify-center items-center min-h-[80vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"magic-circle-large mx-auto mb-6"}),e.jsx("h2",{className:"text-2xl font-bold text-purple-400 mb-4",children:"認証中..."}),e.jsx("p",{className:"text-gray-300",children:"Discordアカウントと接続しています"})]})}):l?e.jsx(N.div,{className:"content-container flex justify-center items-center min-h-[80vh]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs("div",{className:"bg-red-900 bg-opacity-70 p-8 rounded-lg max-w-md w-full text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"認証エラー"}),e.jsx("p",{className:"text-gray-200 mb-6",children:l}),e.jsx("button",{className:"bg-purple-700 text-white px-6 py-2 rounded-md",onClick:()=>t("/login"),children:"ログインページに戻る"})]})}):e.jsxs(N.div,{className:"content-container flex justify-center items-center min-h-[80vh]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"success-animation mb-6",children:e.jsx("div",{className:"checkmark"})}),e.jsx("h2",{className:"text-2xl font-bold text-green-400 mb-4",children:"認証成功！"}),e.jsx("p",{className:"text-gray-300",children:"百鬼異世界へようこそ"})]}),e.jsx("style",{jsx:!0,children:`
        .magic-circle-large {
          width: 150px;
          height: 150px;
          background-image: url('https://i.imgur.com/JlOBUKj.gif');
          background-size: contain;
          background-repeat: no-repeat;
          animation: rotate 3s linear infinite;
        }
        
        .success-animation {
          width: 100px;
          height: 100px;
          margin: 0 auto;
          position: relative;
        }
        
        .checkmark {
          width: 100%;
          height: 100%;
          border-radius: 50%;
          display: block;
          stroke-width: 2;
          stroke: #4bb71b;
          stroke-miterlimit: 10;
          box-shadow: 0 0 20px #4bb71b;
          animation: fill .4s ease-in-out .4s forwards, scale .3s ease-in-out .9s both;
          position: relative;
          top: 5px;
          right: 5px;
          margin: 0 auto;
        }
        
        .checkmark:before {
          content: '';
          width: 3px;
          height: 30px;
          background-color: #4bb71b;
          position: absolute;
          left: 27px;
          top: 50px;
          transform: rotate(45deg);
        }
        
        .checkmark:after {
          content: '';
          width: 3px;
          height: 60px;
          background-color: #4bb71b;
          position: absolute;
          left: 56px;
          top: 35px;
          transform: rotate(-45deg);
        }
        
        @keyframes fill {
          100% {
            box-shadow: 0 0 30px #4bb71b;
          }
        }
        
        @keyframes scale {
          0%, 100% {
            transform: none;
          }
          50% {
            transform: scale3d(1.1, 1.1, 1);
          }
        }
        
        @keyframes rotate {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})},Qe=()=>{const{language:t}=D(),{user:n,token:d,isLoggedIn:m,logout:l}=$(),[s,h]=a.useState(null),[b,i]=a.useState(!0),[v,r]=a.useState(null),[c,w]=a.useState(!1),[S,u]=a.useState(""),[g,y]=a.useState(""),[o,p]=a.useState(""),[j,f]=a.useState(""),[x,M]=a.useState(""),[P,A]=a.useState(null),[W,U]=a.useState(!1),[O,z]=a.useState("profile");a.useEffect(()=>{if(!m)return;(async()=>{i(!0),r(null);try{const L=await V.getProfile(d);h(L.profile),u(L.profile.username),y(L.profile.email)}catch(L){r(L.message)}finally{i(!1)}})()},[m,d]);const ge=()=>{c&&(u((s==null?void 0:s.username)||""),y((s==null?void 0:s.email)||""),p(""),f(""),M(""),A(null)),w(!c),U(!1)},fe=async k=>{if(k.preventDefault(),A(null),U(!1),j&&j!==x){A(C.passwordsDoNotMatch[t]);return}if(j&&!o){A(C.currentPasswordRequired[t]);return}try{const L={};if(S!==(s==null?void 0:s.username)&&(L.username=S),g!==(s==null?void 0:s.email)&&(L.email=g),j&&(L.currentPassword=o,L.newPassword=j),Object.keys(L).length>0){await V.updateProfile(d,L);const G=await V.getProfile(d);if(h(G.profile),n){const je={...n,username:G.profile.username,email:G.profile.email};localStorage.setItem("user",JSON.stringify(je))}U(!0),p(""),f(""),M("")}w(!1)}catch(L){A(L.message)}},C={profile:{ja:"プロフィール",en:"Profile",ko:"프로필",ar:"الملف الشخصي"},characters:{ja:"キャラクター",en:"Characters",ko:"캐릭터",ar:"الشخصيات"},posts:{ja:"投稿",en:"Posts",ko:"게시물",ar:"المنشورات"},username:{ja:"ユーザー名",en:"Username",ko:"사용자 이름",ar:"اسم المستخدم"},email:{ja:"メールアドレス",en:"Email",ko:"이메일",ar:"البريد الإلكتروني"},currentPassword:{ja:"現在のパスワード",en:"Current Password",ko:"현재 비밀번호",ar:"كلمة المرور الحالية"},newPassword:{ja:"新しいパスワード",en:"New Password",ko:"새 비밀번호",ar:"كلمة المرور الجديدة"},confirmPassword:{ja:"パスワードを確認",en:"Confirm Password",ko:"비밀번호 확인",ar:"تأكيد كلمة المرور"},edit:{ja:"編集",en:"Edit",ko:"편집",ar:"تعديل"},save:{ja:"保存",en:"Save",ko:"저장",ar:"حفظ"},cancel:{ja:"キャンセル",en:"Cancel",ko:"취소",ar:"إلغاء"},loading:{ja:"読み込み中...",en:"Loading...",ko:"로딩 중...",ar:"جار التحميل..."},error:{ja:"エラーが発生しました",en:"An error occurred",ko:"오류가 발생했습니다",ar:"حدث خطأ"},passwordsDoNotMatch:{ja:"パスワードが一致しません",en:"Passwords do not match",ko:"비밀번호가 일치하지 않습니다",ar:"كلمات المرور غير متطابقة"},currentPasswordRequired:{ja:"現在のパスワードが必要です",en:"Current password is required",ko:"현재 비밀번호가 필요합니다",ar:"كلمة المرور الحالية مطلوبة"},updateSuccess:{ja:"プロフィールが更新されました",en:"Profile updated successfully",ko:"프로필이 성공적으로 업데이트되었습니다",ar:"تم تحديث الملف الشخصي بنجاح"},memberSince:{ja:"登録日",en:"Member since",ko:"가입일",ar:"عضو منذ"},discordLinked:{ja:"Discordアカウントが連携されています",en:"Discord account linked",ko:"Discord 계정이 연결되었습니다",ar:"حساب Discord مرتبط"},noCharacters:{ja:"キャラクターがありません",en:"No characters yet",ko:"아직 캐릭터가 없습니다",ar:"لا توجد شخصيات حتى الآن"},createCharacter:{ja:"キャラクターを作成",en:"Create Character",ko:"캐릭터 생성",ar:"إنشاء شخصية"},noPosts:{ja:"投稿がありません",en:"No posts yet",ko:"아직 게시물이 없습니다",ar:"لا توجد منشورات حتى الآن"},race:{ja:"種族",en:"Race",ko:"종족",ar:"العرق"},class:{ja:"職業",en:"Class",ko:"직업",ar:"الفئة"},level:{ja:"レベル",en:"Level",ko:"레벨",ar:"المستوى"},human:{ja:"人間",en:"Human",ko:"인간",ar:"إنسان"},oni:{ja:"鬼",en:"Oni",ko:"오니",ar:"أوني"},fairy:{ja:"妖精",en:"Fairy",ko:"요정",ar:"جنية"},undead:{ja:"アンデッド",en:"Undead",ko:"언데드",ar:"غير ميت"},warrior:{ja:"戦士",en:"Warrior",ko:"전사",ar:"محارب"},mage:{ja:"魔導士",en:"Mage",ko:"마법사",ar:"ساحر"},thief:{ja:"盗賊",en:"Thief",ko:"도적",ar:"لص"},exorcist:{ja:"祓魔師",en:"Exorcist",ko:"퇴마사",ar:"طارد الأرواح"}};return m?b?e.jsx("div",{className:"content-container flex justify-center items-center min-h-[80vh]",children:e.jsx("div",{className:"w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full animate-spin"})}):v?e.jsx(N.div,{className:"content-container flex justify-center items-center min-h-[80vh]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs("div",{className:"bg-red-900 bg-opacity-70 p-8 rounded-lg max-w-md w-full text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:C.error[t]}),e.jsx("p",{className:"text-gray-200 mb-6",children:v})]})}):e.jsxs(N.div,{className:"content-container",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:[e.jsx("h1",{className:"text-4xl font-bold text-purple-400 mb-8 text-center",children:C.profile[t]}),e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("div",{className:"bg-gray-900 rounded-lg overflow-hidden",children:e.jsxs("div",{className:"flex",children:[e.jsxs("button",{className:`px-6 py-3 flex items-center ${O==="profile"?"bg-purple-900 text-white":"bg-gray-800 text-gray-300"}`,onClick:()=>z("profile"),children:[e.jsx(T,{className:"w-5 h-5 mr-2"}),C.profile[t]]}),e.jsxs("button",{className:`px-6 py-3 flex items-center ${O==="characters"?"bg-purple-900 text-white":"bg-gray-800 text-gray-300"}`,onClick:()=>z("characters"),children:[e.jsx(De,{className:"w-5 h-5 mr-2"}),C.characters[t]]}),e.jsxs("button",{className:`px-6 py-3 flex items-center ${O==="posts"?"bg-purple-900 text-white":"bg-gray-800 text-gray-300"}`,onClick:()=>z("posts"),children:[e.jsx(le,{className:"w-5 h-5 mr-2"}),C.posts[t]]})]})})}),O==="profile"&&e.jsxs("div",{className:"bg-gray-900 bg-opacity-80 rounded-lg p-8 shadow-lg",children:[W&&e.jsx("div",{className:"bg-green-900 bg-opacity-70 text-white p-4 rounded-md mb-6",children:C.updateSuccess[t]}),P&&e.jsx("div",{className:"bg-red-900 bg-opacity-70 text-white p-4 rounded-md mb-6",children:P}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsx("div",{className:"md:w-1/3",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-32 h-32 bg-purple-800 rounded-full flex items-center justify-center mb-4 overflow-hidden",children:s!=null&&s.avatar?e.jsx("img",{src:s.avatar,alt:s.username,className:"w-full h-full object-cover"}):e.jsx(T,{className:"w-16 h-16 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:s==null?void 0:s.username}),(s==null?void 0:s.discordId)&&e.jsxs("div",{className:"bg-indigo-900 px-3 py-1 rounded-full text-sm flex items-center mb-4",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",viewBox:"0 0 71 55",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M60.1045 4.8978C55.5792 2.8214 50.7265 1.2916 45.6527 0.41542C45.5603 0.39851 45.468 0.440769 45.4204 0.525289C44.7963 1.6353 44.105 3.0834 43.6209 4.2216C38.1637 3.4046 32.7345 3.4046 27.3892 4.2216C26.905 3.0581 26.1886 1.6353 25.5617 0.525289C25.5141 0.443589 25.4218 0.40133 25.3294 0.41542C20.2584 1.2888 15.4057 2.8186 10.8776 4.8978C10.8384 4.9147 10.8048 4.9429 10.7825 4.9795C1.57795 18.7309 -0.943561 32.1443 0.293408 45.3914C0.299005 45.4562 0.335386 45.5182 0.385761 45.5576C6.45866 50.0174 12.3413 52.7249 18.1147 54.5195C18.2071 54.5477 18.305 54.5139 18.3638 54.4378C19.7295 52.5728 20.9469 50.6063 21.9907 48.5383C22.0523 48.4172 21.9935 48.2735 21.8676 48.2256C19.9366 47.4931 18.0979 46.6 16.3292 45.5858C16.1893 45.5041 16.1781 45.304 16.3068 45.2082C16.679 44.9293 17.0513 44.6391 17.4067 44.3461C17.471 44.2926 17.5606 44.2813 17.6362 44.3151C29.2558 49.6202 41.8354 49.6202 53.3179 44.3151C53.3935 44.2785 53.4831 44.2898 53.5502 44.3433C53.9057 44.6363 54.2779 44.9293 54.6529 45.2082C54.7816 45.304 54.7732 45.5041 54.6333 45.5858C52.8646 46.6197 51.0259 47.4931 49.0921 48.2228C48.9662 48.2707 48.9102 48.4172 48.9718 48.5383C50.038 50.6034 51.2554 52.5699 52.5959 54.435C52.6519 54.5139 52.7526 54.5477 52.845 54.5195C58.6464 52.7249 64.529 50.0174 70.6019 45.5576C70.6551 45.5182 70.6887 45.459 70.6943 45.3942C72.1747 30.0791 68.2147 16.7757 60.1968 4.9823C60.1772 4.9429 60.1437 4.9147 60.1045 4.8978ZM23.7259 37.3253C20.2276 37.3253 17.3451 34.1136 17.3451 30.1693C17.3451 26.225 20.1717 23.0133 23.7259 23.0133C27.308 23.0133 30.1626 26.2532 30.1066 30.1693C30.1066 34.1136 27.28 37.3253 23.7259 37.3253ZM47.3178 37.3253C43.8196 37.3253 40.9371 34.1136 40.9371 30.1693C40.9371 26.225 43.7636 23.0133 47.3178 23.0133C50.9 23.0133 53.7545 26.2532 53.6986 30.1693C53.6986 34.1136 50.9 37.3253 47.3178 37.3253Z",fill:"#ffffff"})}),e.jsx("span",{children:C.discordLinked[t]})]}),e.jsxs("p",{className:"text-gray-400 text-sm",children:[C.memberSince[t],": ",new Date((s==null?void 0:s.createdAt)||"").toLocaleDateString()]})]})}),e.jsxs("div",{className:"md:w-2/3",children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx("button",{className:"flex items-center text-sm bg-gray-800 hover:bg-gray-700 px-3 py-1 rounded-md",onClick:ge,children:c?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"w-4 h-4 mr-1"}),C.cancel[t]]}):e.jsxs(e.Fragment,{children:[e.jsx(He,{className:"w-4 h-4 mr-1"}),C.edit[t]]})})}),e.jsxs("form",{onSubmit:fe,children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:"username",className:"block text-gray-300 mb-2 flex items-center",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),C.username[t]]}),c?e.jsx("input",{type:"text",id:"username",value:S,onChange:k=>u(k.target.value),className:"form-input bg-gray-800 text-white border-purple-700 rounded-md w-full"}):e.jsx("div",{className:"bg-gray-800 p-3 rounded-md",children:s==null?void 0:s.username})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:"email",className:"block text-gray-300 mb-2 flex items-center",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),C.email[t]]}),c?e.jsx("input",{type:"email",id:"email",value:g,onChange:k=>y(k.target.value),className:"form-input bg-gray-800 text-white border-purple-700 rounded-md w-full"}):e.jsx("div",{className:"bg-gray-800 p-3 rounded-md",children:s==null?void 0:s.email})]}),c&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:"currentPassword",className:"block text-gray-300 mb-2 flex items-center",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),C.currentPassword[t]]}),e.jsx("input",{type:"password",id:"currentPassword",value:o,onChange:k=>p(k.target.value),className:"form-input bg-gray-800 text-white border-purple-700 rounded-md w-full"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:"newPassword",className:"block text-gray-300 mb-2 flex items-center",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),C.newPassword[t]]}),e.jsx("input",{type:"password",id:"newPassword",value:j,onChange:k=>f(k.target.value),className:"form-input bg-gray-800 text-white border-purple-700 rounded-md w-full"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{htmlFor:"confirmPassword",className:"block text-gray-300 mb-2 flex items-center",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),C.confirmPassword[t]]}),e.jsx("input",{type:"password",id:"confirmPassword",value:x,onChange:k=>M(k.target.value),className:"form-input bg-gray-800 text-white border-purple-700 rounded-md w-full"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",className:"bg-purple-700 text-white px-4 py-2 rounded-md flex items-center",children:[e.jsx(Ue,{className:"w-4 h-4 mr-2"}),C.save[t]]})})]})]})]})]})]}),O==="characters"&&e.jsx("div",{className:"bg-gray-900 bg-opacity-80 rounded-lg p-8 shadow-lg",children:s!=null&&s.characters&&s.characters.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.characters.map(k=>e.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsxs("div",{className:"w-16 h-16 bg-purple-900 rounded-full flex items-center justify-center mr-4",children:[k.race==="human"&&e.jsx(T,{className:"w-8 h-8"}),k.race==="oni"&&e.jsx(F,{className:"w-8 h-8"}),k.race==="fairy"&&e.jsx(Y,{className:"w-8 h-8"}),k.race==="undead"&&e.jsx(ce,{className:"w-8 h-8"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:k.username}),e.jsxs("p",{className:"text-purple-400",children:[C.level[t]," ",k.level]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:C.race[t]}),e.jsx("p",{className:"font-medium",children:C[k.race][t]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:C.class[t]}),e.jsx("p",{className:"font-medium",children:C[k.class][t]})]})]})]},k.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-400 mb-4",children:C.noCharacters[t]}),e.jsx("button",{className:"bg-purple-700 text-white px-4 py-2 rounded-md",onClick:()=>window.location.href="/character",children:C.createCharacter[t]})]})}),O==="posts"&&e.jsx("div",{className:"bg-gray-900 bg-opacity-80 rounded-lg p-8 shadow-lg",children:s!=null&&s.posts&&s.posts.length>0?e.jsx("div",{className:"space-y-6",children:s.posts.map(k=>e.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-800 rounded-full flex items-center justify-center mr-3",children:e.jsx(T,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:k.author}),e.jsx("p",{className:"text-gray-400 text-sm",children:k.displayTime||new Date(k.timestamp).toLocaleDateString()})]})]}),e.jsx("p",{className:"mb-4",children:k.content}),e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"flex items-center text-gray-400",children:[e.jsx(de,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:k.likes})]})})]},k.id))}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-400",children:C.noPosts[t]})})})]})]}):e.jsx(N.div,{className:"content-container flex justify-center items-center min-h-[80vh]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs("div",{className:"bg-red-900 bg-opacity-70 p-8 rounded-lg max-w-md w-full text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:C.error[t]}),e.jsx("p",{className:"text-gray-200 mb-6",children:"ログインが必要です"})]})})},ne=[{url:"https://images.unsplash.com/photo-1518709268805-4e9042af9f23?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1684&q=80",name:"floating-city"},{url:"https://images.unsplash.com/photo-1604076913837-52ab5629fba9?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1674&q=80",name:"ruins-temple"},{url:"https://images.unsplash.com/photo-1518391846015-55a9cc003b25?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1770&q=80",name:"magic-forest"},{url:"https://images.unsplash.com/photo-1532767153582-b1a0e5145009?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1674&q=80",name:"blood-moon"}],et=()=>{const[t,n]=a.useState(0),[d,m]=a.useState(!1),[l,s]=a.useState(!1),[h,b]=a.useState(Date.now());return a.useEffect(()=>{const i=setInterval(()=>{m(!0),setTimeout(()=>{n(v=>(v+1)%ne.length),m(!1)},1e3)},3e4);return()=>clearInterval(i)},[]),a.useEffect(()=>{const i=()=>{b(Date.now()),s(!1)};window.addEventListener("mousemove",i),window.addEventListener("keydown",i),window.addEventListener("click",i);const v=setInterval(()=>{Date.now()-h>6e4&&s(!0)},1e4);return()=>{window.removeEventListener("mousemove",i),window.removeEventListener("keydown",i),window.removeEventListener("click",i),clearInterval(v)}},[h]),e.jsxs("div",{className:"background-container",children:[ne.map((i,v)=>e.jsx("img",{src:i.url,alt:i.name,className:`background-image ${v===t?"active":""}`,style:{zIndex:v===t?0:-1}},i.name)),e.jsx("div",{className:"background-overlay"}),l&&e.jsx("div",{className:"ghost-apparition",children:e.jsx("img",{src:"https://i.imgur.com/XzMxmvC.gif",alt:"Ghost Apparition",className:"ghost-image",style:{position:"fixed",bottom:"50px",right:"50px",width:"200px",height:"auto",opacity:.7,zIndex:1}})})]})},X=[{name:"異世界の風",url:"https://assets.codepen.io/21542/howler-demo-bg-music.mp3"},{name:"魔法の森",url:"https://assets.codepen.io/21542/howler-demo-bg-music.mp3"},{name:"百鬼夜行",url:"https://assets.codepen.io/21542/howler-demo-bg-music.mp3"}],tt=({isMuted:t,volume:n})=>{const[d,m]=a.useState(0),l=a.useRef(null),[s]=se("/click.mp3",{volume:.5}),[h]=se("/portal.mp3",{volume:.5});a.useEffect(()=>{l.current&&(l.current.volume=t?0:n,!t&&l.current.paused&&l.current.play().catch(i=>console.error("Audio playback failed:",i)))},[t,n]);const b=()=>{m(i=>(i+1)%X.length)};return a.useEffect(()=>{const i=document.querySelectorAll("button"),v=()=>{t||s()};return i.forEach(r=>{r.addEventListener("click",v)}),()=>{i.forEach(r=>{r.removeEventListener("click",v)})}},[t,s]),a.useEffect(()=>{const i=()=>{if(!t){h();const r=document.createElement("div");r.className="portal-transition",document.body.appendChild(r),setTimeout(()=>{r.classList.add("active")},10),setTimeout(()=>{r.classList.remove("active"),setTimeout(()=>{r.remove()},500)},1e3)}},v=document.querySelectorAll("a");return v.forEach(r=>{r.addEventListener("click",i)}),()=>{v.forEach(r=>{r.removeEventListener("click",i)})}},[t,h]),e.jsxs(e.Fragment,{children:[e.jsx("audio",{ref:l,src:X[d].url,loop:!1,autoPlay:!t,onEnded:b}),e.jsxs("div",{className:"current-track-info",style:{position:"fixed",bottom:"60px",right:"20px",background:"rgba(10, 10, 10, 0.7)",padding:"5px 10px",borderRadius:"4px",fontSize:"12px",opacity:t?0:.7,transition:"opacity 0.3s ease"},children:["♪ ",X[d].name]})]})},st=a.createContext(void 0),at=({children:t})=>{const[n,d]=a.useState(null),m=s=>{d(s)},l=()=>{d(null)};return e.jsx(st.Provider,{value:{user:n,isLoggedIn:!!n,login:m,logout:l},children:t})};function rt(){const[t,n]=a.useState(!1),[d,m]=a.useState(.5),[l,s]=a.useState(!0);return a.useEffect(()=>{const h=setTimeout(()=>{s(!1)},2500);return()=>clearTimeout(h)},[]),l?e.jsx("div",{className:"loading-screen",children:e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"magic-circle"}),e.jsx("h1",{className:"loading-text",children:"百鬼異世界へ接続中..."})]})}):e.jsx(Oe,{children:e.jsx(at,{children:e.jsx(We,{children:e.jsx(Ge,{children:e.jsx(ye,{children:e.jsxs("div",{className:"app-container",children:[e.jsx(et,{}),e.jsx(tt,{isMuted:t,volume:d}),e.jsx(ze,{isMuted:t,setIsMuted:n,volume:d,setVolume:m}),e.jsx(ve,{mode:"wait",children:e.jsxs(we,{children:[e.jsx(R,{path:"/",element:e.jsx(Je,{})}),e.jsx(R,{path:"/server-info",element:e.jsx(Ve,{})}),e.jsx(R,{path:"/rules",element:e.jsx(Xe,{})}),e.jsx(R,{path:"/character",element:e.jsx(Ke,{})}),e.jsx(R,{path:"/forum",element:e.jsx(Ye,{})}),e.jsx(R,{path:"/login",element:e.jsx(_e,{})}),e.jsx(R,{path:"/auth-callback",element:e.jsx(Ze,{})}),e.jsx(R,{path:"/profile",element:e.jsx(Qe,{})})]})})]})})})})})})}ue(document.getElementById("root")).render(e.jsx(a.StrictMode,{children:e.jsx(rt,{})}));
